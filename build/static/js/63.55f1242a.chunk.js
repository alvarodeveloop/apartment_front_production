(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[63],{614:function(e,a,t){},730:function(e,a,t){"use strict";t.r(a);var r=t(66),n=t.n(r),c=t(106),l=t(105),o=t(27),s=t(78),i=t(77),u=t(0),m=t.n(u),d=t(572),p=t(570),b=t(22),f=t(140),E=t(84),g=t(139),v=t(36),h=t(181),j=t(142),O=t(43),k=t.n(O),x=t(28),y=t(76),N=(t(614),function(e){var a=Object(u.useState)({name:"",email:"",rut:"",password:"",id_rol:""}),t=Object(i.a)(a,2),r=t[0],v=t[1],h=Object(u.useState)([]),O=Object(i.a)(h,2),N=O[0],w=O[1],S=Object(u.useState)([]),C=Object(i.a)(S,2),M=C[0],_=C[1],q=Object(u.useState)([]),R=Object(i.a)(q,2),D=R[0],P=R[1],T=Object(u.useState)(!1),I=Object(i.a)(T,2),F=I[0],H=I[1],J=Object(u.useState)(!1),U=Object(i.a)(J,2),V=U[0],B=U[1],G=Object(u.useState)(!1),L=Object(i.a)(G,2),z=L[0],A=L[1];Object(u.useEffect)((function(){!function(){var a=[k.a.get(y.a+"modules"),k.a.get(y.a+"roles")];e.match.params.id>0&&a.push(k.a.get(y.a+"user/"+e.match.params.id)),Promise.all(a).then((function(a){if(P(a[0].data),_(a[1].data),e.match.params.id){v({name:a[2].data.user.name,email:a[2].data.user.email,rut:a[2].data.user.rut,password:"",id_rol:a[2].data.user.id_rol});var t=a[2].data.modules.map((function(e){return e.id_menu}));w(t),A(!0)}})).catch((function(e){x.NotificationManager.error("Error, contacte con soporte")}))}()}),[]);var K=function(e){v(Object(s.a)(Object(s.a)({},r),{},Object(o.a)({},e.target.name,e.target.value)))},Q=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.persist(),!a.target.checked){e.next=6;break}return e.next=4,w([].concat(Object(c.a)(N),[t]));case 4:e.next=7;break;case 6:w(N.filter((function(e){return e!=a.target.value})));case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),W=function(){e.history.replace("/user/list")},X=function(){var a=Object(l.a)(n.a.mark((function a(t){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.a.get(y.a+"menu_user");case 2:r=a.sent,e.setMenu(r.data),t?setTimeout((function(){e.history.push("/user/list")}),1e3):(v({name:"",email:"",rut:"",password:"",id_rol:""}),w([]),H(!1),B(!0));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return m.a.createElement(p.a,null,m.a.createElement(b.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void H(!0);if(0===N.length)return a.stopPropagation(),H(!0),void x.NotificationManager.error("Debe escoger al menos un m\xf3dulo para el usuario");var n=Object.assign({},r,{modules:N});if(!z&&!n.password)return x.NotificationManager.error("Debe escribir una contrase\xf1a"),!1;z?k.a.put(y.a+"user/"+e.match.params.id,n).then((function(e){x.NotificationManager.success("Usuario Modificado"),X(!0)})).catch((function(e){var a=e.response;a?x.NotificationManager.error(a.data.message):x.NotificationManager.error("Error, contacte con soporte")})):k.a.post(y.a+"user",n).then((function(e){x.NotificationManager.success("Usuario Registrado"),X(!1)})).catch((function(e){var a=e.response;a?x.NotificationManager.error(a.data.message):x.NotificationManager.error("Error, contacte con soporte")}))},noValidate:!0,validated:F},m.a.createElement(f.a,null,m.a.createElement(E.a,{sm:5,md:5,lg:5,xs:12,className:"containerDivSeparated"},m.a.createElement("h3",{className:"text-center font-title"},"Formulario"),m.a.createElement("br",null),m.a.createElement(f.a,null,m.a.createElement(j.a,Object.assign({},e.inputName,{handleChange:K,value:r.name})),m.a.createElement(j.a,Object.assign({},e.inputEmail,{handleChange:K,value:r.email}))),m.a.createElement(f.a,null,m.a.createElement(j.a,Object.assign({},e.inputRut,{handleChange:K,value:r.rut})),m.a.createElement(j.a,Object.assign({},e.inputPassword,{handleChange:K,value:r.password}))),m.a.createElement(f.a,null,m.a.createElement(j.a,Object.assign({},e.inputSelect,{handleChange:K,value:r.id_rol}),m.a.createElement("option",{value:""},"--Seleccione--"),M.map((function(e,a){return m.a.createElement("option",{key:a,value:e.id},e.name_role)})))),V?m.a.createElement(f.a,null,m.a.createElement(E.a,{sm:6,md:6,lg:6,xs:6},m.a.createElement(g.a,{type:"button",variant:"primary",block:!0,onClick:function(){return B(!1)}},"Registrar Otro ",m.a.createElement(d.d,null))),m.a.createElement(E.a,{sm:6,md:6,lg:6,xs:6},m.a.createElement(g.a,{type:"button",variant:"warning",block:!0,onClick:W},"Ir al listado ",m.a.createElement(d.l,null)))):m.a.createElement(f.a,null,m.a.createElement(E.a,{sm:12,md:12,lg:12,xs:12,className:"text-center"},m.a.createElement(g.a,{type:"submit",variant:"secondary",block:!0},"Enviar ",m.a.createElement(d.d,null)),"o",m.a.createElement(g.a,{onClick:W,type:"button",variant:"primary",block:!0},"Ir al Listado")))),m.a.createElement(E.a,{sm:7,md:7,lg:7,xs:12,className:"containerDivSeparated"},m.a.createElement("h3",{className:"text-center font-title"},"M\xf3dulos"),m.a.createElement(f.a,null,D.map((function(e,a){return m.a.createElement(E.a,{sm:4,md:4,lg:4,xs:6,key:a},m.a.createElement(b.a.Group,null,m.a.createElement("label",{forHtml:e.name_item+e.id},m.a.createElement("input",{type:"checkbox",id:e.name_item+e.id,value:e.id,checked:!!N.find((function(a){return a==e.id})),onChange:function(a){return Q(a,e.id)}}),m.a.createElement("br",null),e.name_item)))}))),m.a.createElement("div",{className:"fixedBottom"},m.a.createElement(f.a,null,m.a.createElement(E.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){var e=D.map((function(e){return e.id}));w(e)}},"Seleccionar Todos ",m.a.createElement(d.b,null))),m.a.createElement(E.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){w([])}},"Deseleccionar Todos ",m.a.createElement(d.k,null)))),m.a.createElement(f.a,{className:"justify-content-center"},m.a.createElement(E.a,{sm:12,md:12,lg:12},m.a.createElement("br",null),m.a.createElement("p",null,"Hacer click en el bot\xf3n enviar para guardar los cambios"))))))))});N.defaultProps={inputName:{type:"text",required:!0,name:"name",label:"Nombre Completo",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputEmail:{type:"email",required:!0,name:"email",label:"Email",messageErrors:["Requerido*, ","Formato tipo Email*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputRut:{type:"text",required:!0,name:"rut",label:"Documento Identidad",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputPassword:{type:"password",required:!1,name:"password",label:"Contrase\xf1a",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputSelect:{type:"select",required:!0,name:"id_rol",label:"Rol",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"}},a.default=Object(v.b)(null,{setMenu:h.b})(N)}}]);
//# sourceMappingURL=63.55f1242a.chunk.js.map