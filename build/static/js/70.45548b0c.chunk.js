(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[70],{590:function(e,a,t){"use strict";var n=t(18),r=t(44),o=t(73),c=t.n(o),l=t(114),s=t(30),i=t(1),u=t.n(i),m=t(567),d=t(568),p=t(282),b=t(10),g=t(280),h=t(112),E=t(288),f=t(25),y=t.n(f),v=t(34),_=t(13),j=function(e){var a=Object(i.useState)(!1),t=Object(s.a)(a,2),o=t[0],f=t[1],j=Object(i.useState)({name:"",last_names:"",rut:"",email:"",id_city:"",id_country:"",poblation:"",phone_1:"",phone_2:"",address:""}),O=Object(s.a)(j,2),q=O[0],C=O[1],x=Object(i.useState)([]),R=Object(s.a)(x,2),P=R[0],k=R[1],w=Object(i.useState)([]),N=Object(s.a)(w,2),S=N[0],T=N[1],M=Object(i.useRef)(null);Object(i.useEffect)((function(){A(),M.current.focus()}),[]);var A=function(){var a=[y.a.get(v.a+"master_countrys")];e.match.params.id&&a.push(y.a.get(v.a+"client/"+e.match.params.id)),Promise.all(a).then(function(){var e=Object(l.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(a[0].data),a[1]&&(C({name:a[1].data.name,last_names:a[1].data.last_names,rut:a[1].data.rut,email:a[1].data.email,id_city:a[1].data.id_city,id_country:a[1].data.id_country,poblation:a[1].data.poblation,phone_1:a[1].data.phone_1,phone_2:a[1].data.phone_2,address:a[1].data.address,id:a[1].data.id}),T((function(e){return a[0].data.find((function(e){return e.id==a[1].data.id_country})).cities})));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){e.response?_.b.error(e.response.data.message):_.b.error("Error, contacte con soporte")}))},D=function(e){if(e.persist(),"id_country"===e.target.name)T((function(a){return P.find((function(a){return a.id==e.target.value})).cities})),C(Object(r.a)(Object(r.a)({},q),{},{id_country:e.target.value,id_city:""}));else if("rut"===e.target.name){var a=e.target.value;(a=a.split("-").join(""))&&(a=a.substring(0,a.length-1)+"-"+a.substring(a.length-1)),C(Object(r.a)(Object(r.a)({},q),{},{rut:a}))}else C(Object(r.a)(Object(r.a)({},q),{},Object(n.a)({},e.target.name,e.target.value)))},V=function(a){e.isModal?e.showTable(a):e.history.replace("/masters/clients")},z=function(){C({name:"",last_names:"",rut:"",email:"",id_city:"",id_country:"",poblation:"",phone_1:"",phone_2:"",address:""}),f(!1),M.current.focus()};return u.a.createElement(m.a,null,u.a.createElement(d.a,{className:""},u.a.createElement(p.a,{sm:12,md:12,lg:12},u.a.createElement(b.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void f(!0);var n=Object.assign({},q);n.id?y.a.put(v.a+"client/"+n.id,n).then((function(e){_.b.success("Registro Modificado"),V()})).catch((function(e){e.response?_.b.error(e.response.data.message):_.b.error("Error, contacte con soporte")})):y.a.post(v.a+"client",n).then((function(a){_.b.success("Registro Creado"),z(),e.isModal&&V(!0)})).catch((function(e){e.response?_.b.error(e.response.data.message):_.b.error("Error, contacte con soporte")}))},noValidate:!0,validated:o},u.a.createElement(d.a,null,u.a.createElement(E.a,Object.assign({},e.inputRut,{value:q.rut,handleChange:D,ref:M})),u.a.createElement(h.a,Object.assign({},e.inputName,{value:q.name,handleChange:D})),u.a.createElement(h.a,Object.assign({},e.inputLastNames,{value:q.last_names,handleChange:D}))),u.a.createElement(d.a,null,u.a.createElement(h.a,Object.assign({},e.inputAddress,{value:q.address,handleChange:D})),u.a.createElement(h.a,Object.assign({},e.inputPoblation,{value:q.poblation,handleChange:D})),u.a.createElement(h.a,Object.assign({},e.inputEmail,{value:q.email,handleChange:D}))),u.a.createElement(d.a,null,u.a.createElement(h.a,Object.assign({},e.inputPhone,{value:q.phone_1,handleChange:D})),u.a.createElement(h.a,Object.assign({},e.inputPhone2,{value:q.phone_2,handleChange:D}))),u.a.createElement(d.a,null,u.a.createElement(h.a,Object.assign({},e.inputCountry,{value:q.id_country,handleChange:D}),u.a.createElement("option",{value:""},"--Seleccione--"),P.map((function(e,a){return u.a.createElement("option",{value:e.id,key:a},e.name)}))),u.a.createElement(h.a,Object.assign({},e.inputCity,{value:q.id_city,handleChange:D}),u.a.createElement("option",{value:""},"--Seleccione--"),S.map((function(e,a){return u.a.createElement("option",{value:e.id,key:a},e.name)})))),u.a.createElement(d.a,{className:"justify-content-center"},u.a.createElement(p.a,{sm:4,md:4,lg:4},u.a.createElement(g.a,{type:"submit",size:"sm",variant:"primary",block:!0},"Guardar")),u.a.createElement(p.a,{sm:4,md:4,lg:4},u.a.createElement(g.a,{type:"submit",size:"sm",variant:"danger",block:!0,onClick:function(){V(!1)}},"Volver")))))))};j.defaultProps={inputRut:{type:"text",required:!0,name:"rut",label:"Rut",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputName:{type:"text",required:!0,name:"name",label:"Nombre",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputLastNames:{type:"text",required:!0,name:"last_names",label:"Apellidos",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputPoblation:{type:"text",required:!1,name:"poblation",label:"Poblaci\xf3n",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputAddress:{type:"textarea",required:!1,name:"address",label:"Direcci\xf3n",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputCountry:{type:"select",required:!0,name:"id_country",label:"Pa\xeds",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputCity:{type:"select",required:!0,name:"id_city",label:"Ciudad",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputEmail:{type:"email",required:!1,name:"email",label:"Email",messageErrors:["Requerido*,"," Formato tipo Email*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputPhone:{type:"number",required:!1,name:"phone_1",label:"Tel\xe9fono Principal",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputPhone2:{type:"number",required:!1,name:"phone_2",label:"Telefono Secundario",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"}},a.a=j},778:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(590),c=t(568),l=t(282);a.default=function(e){return r.a.createElement(c.a,{className:"containerDiv"},r.a.createElement(l.a,{sm:12,md:12,lg:12},r.a.createElement(o.a,Object.assign({isModal:!1,showTable:function(){}},e))))}}}]);
//# sourceMappingURL=70.45548b0c.chunk.js.map