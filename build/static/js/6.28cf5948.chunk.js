(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[6],{571:function(e,a,t){"use strict";var n=t(18),r=t(574),l=t(1),i=t.n(l),o=t(577),c=t(575),s=t(576),u=t(280);function d(){var e=Object(r.a)(["\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return d=function(){return e},e}var m=o.a.div(d());function g(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,r=a.setFilter,l=n.length;return i.a.createElement("input",{value:t||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function p(e,a,t){return Object(s.a)(e,t,{keys:[function(e){return e.values[a]}]})}function f(e){var a=e.columns,t=e.data,r=e.displayPaginationUp,l=e.letrasChicas,o=i.a.useMemo((function(){return{fuzzyText:p,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),s=i.a.useMemo((function(){return{Filter:g}}),[]),d=Object(c.useTable)({columns:a,data:t,defaultColumn:s,filterTypes:o,initialState:{pageIndex:0}},c.useFilters,c.useSortBy,c.usePagination),m=d.getTableProps,f=d.getTableBodyProps,b=d.headerGroups,E=d.page,_=d.prepareRow,v=d.canPreviousPage,h=d.canNextPage,y=d.pageOptions,k=d.pageCount,j=d.gotoPage,O=d.nextPage,C=d.previousPage,w=d.setPageSize,S=d.state,q=S.pageIndex,P=S.pageSize;return i.a.createElement("div",{className:"table-responsive"},r?i.a.createElement("div",{className:"pagination"},i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!v},"<<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!v},"<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!h},">")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j(k-1)},disabled:!h},">>")," ",i.a.createElement("span",null,"P\xe1gina"," ",i.a.createElement("strong",null,q+1," de ",y.length)," "),i.a.createElement("span",{className:"ml-3"},"| ",i.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),i.a.createElement("input",Object(n.a)({type:"number",defaultValue:q+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>y.length&&(e.target.value=1)}))))," ",i.a.createElement("select",{value:P,onChange:function(e){w(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return i.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",i.a.createElement("table",Object.assign({},m(),{className:"table table-bordered"}),i.a.createElement("thead",null,b.map((function(e,a){return i.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center",key:a}),e.headers.map((function(e,a){return i.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera",style:{fontSize:l?"14px":"15px"},key:a}),e.render("Header"),i.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),i.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),i.a.createElement("tbody",Object.assign({},f(),{className:"text-center",style:{fontSize:l?"13px":"15px"}}),E.map((function(e,a){return _(e)||i.a.createElement("tr",Object.assign({},e.getRowProps(),{key:a+"-"}),e.cells.map((function(e,a){return i.a.createElement("td",Object.assign({},e.getCellProps(),{key:a+"td"}),e.render("Cell"))})))})))),i.a.createElement("div",{className:"pagination"},i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!v},"<<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!v},"<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!h},">")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j(k-1)},disabled:!h},">>")," ",i.a.createElement("span",null,"P\xe1gina"," ",i.a.createElement("strong",null,q+1," de ",y.length)," "),i.a.createElement("span",{className:"ml-3"},"| ",i.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),i.a.createElement("input",Object(n.a)({type:"number",defaultValue:q+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>y.length&&(e.target.value=1)}))))," ",i.a.createElement("select",{value:P,onChange:function(e){w(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return i.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}p.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.displayPaginationUp,r=e.letrasChicas;return i.a.createElement(m,null,i.a.createElement(f,{data:a,columns:t,displayPaginationUp:n,letrasChicas:r}))}},585:function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"a",(function(){return c}));var n=t(1),r=t.n(n),l=t(289),i=t(588),o=[{Header:"Nro",accessor:"id",Cell:function(e){return r.a.createElement(i.a,{variant:"danger",style:{fontSize:"14px"}},e.cell.row.original.id)}},{Header:"Fecha",accessor:function(e){return[l(e.createdAt).format("DD-MM-YYYY hh:mm:ss")]}},{Header:"Autor",accessor:function(e){return[e.user.email]}},{Header:"Detalle",accessor:"detail",Cell:function(e){var a=e.cell.row.original;return-1===a.detail.indexOf("/")?a.detail.split("@").map((function(e,a){return r.a.createElement("div",{style:{width:"100%"}},e,r.a.createElement("hr",null))})):a.detail.split("/").map((function(e,a){return r.a.createElement("div",{style:{width:"100%"}},e,r.a.createElement("br",null))}))}},{Header:"Privado",accessor:function(e){return e.is_private?["Si"]:["No"]}},{Header:"Documento",accessor:function(e){return["-"]}}],c=[{Header:"Nro",accessor:"id",Cell:function(e){return r.a.createElement(i.a,{variant:"danger",style:{fontSize:"14px"}},e.cell.row.original.id)}},{Header:"Fecha",accessor:function(e){return[l(e.createdAt).format("DD-MM-YYYY hh:mm:ss")]}},{Header:"Autor",accessor:function(e){return[e.user.email]}},{Header:"Detalle",accessor:"detail",Cell:function(e){var a=e.cell.row.original;return-1!==a.detail.indexOf("/")?a.detail.split("/").map((function(e,a){return r.a.createElement("div",{style:{width:"100%"}},e,r.a.createElement("br",null))})):a.detail.split("@").map((function(e,a){return r.a.createElement("div",{style:{width:"100%"}},e,r.a.createElement("br",null))}))}},{Header:"Privado",accessor:function(e){return e.is_private?["Si"]:["No"]}},{Header:"Documento",accessor:function(e){return["-"]}}]},599:function(e,a,t){"use strict";var n=t(18),r=t(44),l=t(30),i=t(1),o=t.n(i),c=t(800),s=t(10),u=t(568),d=t(282),m=t(280),g=t(146),p=t(13),f=t(34),b=t(25),E=t.n(b),_=t(112);t(288);a.a=function(e){var a=Object(i.useState)({detail:"",id_origin:"",is_private:!0}),t=Object(l.a)(a,2),b=t[0],v=t[1],h=Object(i.useState)(!1),y=Object(l.a)(h,2),k=y[0],j=y[1],O=Object(i.useState)([]),C=Object(l.a)(O,2),w=C[0],S=C[1];Object(i.useEffect)((function(){x()}),[]);var q=function(e){if("is_private"===e.target.name){var a,t="true"===e.target.value;v(Object(r.a)(Object(r.a)({},b),{},(a={},Object(n.a)(a,e.target.name,t),Object(n.a)(a,"id_worker",""),a)))}else v(Object(r.a)(Object(r.a)({},b),{},Object(n.a)({},e.target.name,e.target.value)))},P=function(){v({detail:"",id_origin:"",is_private:!0})},x=function(){var e=[E.a.get(f.a+"params_service_origin")];Promise.all(e).then((function(e){S(e[0].data)})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))};return o.a.createElement(c.a,{show:e.show,onHide:e.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"},o.a.createElement(c.a.Header,{closeButton:!0,style:{backgroundColor:"black",color:"white"}},o.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"},e.title," ",o.a.createElement(g.c,null))),o.a.createElement(c.a.Body,null,o.a.createElement(s.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void j(!0);var n=Object.assign({},b);e.submit(n).then((function(a){p.b.success("Seguimiento Agregado"),P(),e.onHide()})).catch((function(e){p.b.error(e)}))},noValidate:!0,validated:k},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:{span:3,offset:9},md:{span:3,offset:9},lg:{span:3,offset:9}},o.a.createElement("p",{style:{color:"red"}},"Campos requeridos*"))),o.a.createElement(u.a,null,o.a.createElement(_.a,{type:"textarea",required:!0,name:"detail",value:b.detail,handleChange:q,label:"Detalle Seguimiento",rows:3,messageErrors:["Requerido*"],cols:"col-md-6 col-sm-6 col-lg-6"}),o.a.createElement(_.a,{type:"select",required:!0,name:"id_origin",value:b.id_origin,handleChange:q,label:"Origen:",messageErrors:["Requerido*"],cols:"col-md-6 col-sm-6 col-lg-6"},o.a.createElement("option",{value:""},"--Seleccione--"),w.map((function(e,a){return o.a.createElement("option",{key:a,value:e.id},e.name)})))),o.a.createElement(u.a,null,o.a.createElement(_.a,{type:"select",required:!0,name:"is_private",value:b.is_private,handleChange:q,label:"Privado:",messageErrors:["Requerido*"],cols:"col-md-6 col-sm-6 col-lg-6"},o.a.createElement("option",{value:""},"--Seleccione--"),o.a.createElement("option",{value:!0},"Si"),o.a.createElement("option",{value:!1},"No"))),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"submit",variant:"primary",block:!0},"Agregar")),o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"button",variant:"danger",block:!0,onClick:e.onHide},"Cerrar"))))))}},621:function(e,a,t){},622:function(e,a,t){"use strict";var n=t(18),r=t(44),l=t(30),i=t(1),o=t.n(i),c=t(800),s=t(10),u=t(568),d=t(282),m=t(280),g=t(146),p=t(13),f=t(34),b=t(25),E=t.n(b),_=t(112);t(288);a.a=function(e){var a=Object(i.useState)({assigned_to:"",id_worker:"",id_task:"",solicitude:"",description:"",id_block_hour_final:"",id_block_hour_initial:"",initial_date:"",final_date:""}),t=Object(l.a)(a,2),b=t[0],v=t[1],h=Object(i.useState)(!1),y=Object(l.a)(h,2),k=y[0],j=y[1],O=Object(i.useState)([]),C=Object(l.a)(O,2),w=C[0],S=C[1],q=Object(i.useState)([]),P=Object(l.a)(q,2),x=P[0],N=P[1],z=Object(i.useState)([]),H=Object(l.a)(z,2),R=H[0],D=H[1],F=Object(i.useState)([]),A=Object(l.a)(F,2),T=A[0],M=A[1];Object(i.useEffect)((function(){V()}),[]);var Y=function(e){if("assigned_to"===e.target.name){var a,t="true"===e.target.value;I(t),v(Object(r.a)(Object(r.a)({},b),{},(a={},Object(n.a)(a,e.target.name,t),Object(n.a)(a,"id_worker",""),a)))}else v(Object(r.a)(Object(r.a)({},b),{},Object(n.a)({},e.target.name,e.target.value)))},B=function(){v({assigned_to:"",id_worker:"",id_task:"",solicitude:"",description:"",id_block_hour_final:"",id_block_hour_initial:"",initial_date:"",final_date:""}),M([]),D([])},V=function(){var e=[E.a.get(f.a+"params_service_type_task"),E.a.get(f.a+"get_block_hour")];Promise.all(e).then((function(e){S(e[0].data),N(e[1].data)})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))},I=function(e){var a=e?f.a+"personal_enterprise":f.a+"master_contractor";E.a.get(a).then((function(a){e?(D(a.data),M([])):(D([]),M(a.data))})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))};return o.a.createElement(c.a,{show:e.show,onHide:e.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"},o.a.createElement(c.a.Header,{closeButton:!0,style:{backgroundColor:"black",color:"white"}},o.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"},"Agrega Nueva Tarea ",o.a.createElement(g.i,null))),o.a.createElement(c.a.Body,null,o.a.createElement(s.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void j(!0);var n=Object.assign({},b);""!==n.assigned_to?e.submit(n).then((function(a){p.b.success("Tarea Agregada"),B(),e.onHide()})).catch((function(e){p.b.error(e)})):p.b.error("Debe elegir a que tipo de Invididuo se le asignar\xe1 la tarea")},noValidate:!0,validated:k},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:{span:3,offset:9},md:{span:3,offset:9},lg:{span:3,offset:9}},o.a.createElement("p",{style:{color:"red"}},"Campos requeridos*"))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:7,lg:7,md:7},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,lg:12,md:12},o.a.createElement("b",null,"Asignado A:"))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,lg:6,md:6},o.a.createElement("label",null,o.a.createElement("input",{type:"radio",name:"assigned_to",id:"assigned_to1",value:!0,onChange:Y}),"Personal de Postventa")),o.a.createElement(d.a,{sm:6,lg:6,md:6},o.a.createElement("label",null,o.a.createElement("input",{type:"radio",name:"assigned_to",id:"assigned_to2",value:!1,onChange:Y}),"Contratistas")))),o.a.createElement(_.a,{type:"select",required:!0,name:"id_worker",value:b.id_worker,handleChange:Y,label:"Invididuo",messageErrors:["Requerido*"],cols:"col-md-5 col-sm-5 col-lg-5"},o.a.createElement("option",{value:""},"--Seleccione--"),R.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name+" "+e.last_names)})),T.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name)})))),o.a.createElement(u.a,null,o.a.createElement(_.a,{type:"select",required:!0,name:"id_task",value:b.id_task,handleChange:Y,label:"Tarea",messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"},o.a.createElement("option",{value:""},"--Seleccione--"),w.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name)}))),o.a.createElement(_.a,{type:"text",required:!0,name:"solicitude",value:b.solicitude,handleChange:Y,label:"Solicitud de Material:",messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"}),o.a.createElement(_.a,{type:"textarea",required:!0,name:"description",value:b.description,handleChange:Y,label:"Descripci\xf3n",rows:3,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"})),o.a.createElement(u.a,null,o.a.createElement(_.a,{type:"date",required:!0,name:"initial_date",value:b.initial_date,handleChange:Y,label:"Fecha Inicial",messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"}),o.a.createElement(_.a,{type:"select",required:!0,name:"id_block_hour_initial",value:b.id_block_hour_initial,handleChange:Y,label:"Bloque",messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),x.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.block)}))),o.a.createElement(_.a,{type:"date",required:!0,name:"final_date",value:b.final_date,handleChange:Y,label:"Fecha Final",messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"}),o.a.createElement(_.a,{type:"select",required:!0,name:"id_block_hour_final",value:b.id_block_hour_final,handleChange:Y,label:"Bloque",messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),x.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.block)})))),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"submit",variant:"primary",block:!0},"Agregar")),o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"button",variant:"danger",block:!0,onClick:e.onHide},"Cerrar"))))))}},623:function(e,a,t){"use strict";var n=t(18),r=t(44),l=t(30),i=t(1),o=t.n(i),c=t(800),s=t(10),u=t(568),d=t(282),m=t(280),g=t(146),p=t(13),f=t(34),b=t(25),E=t.n(b),_=t(112);t(288);a.a=function(e){var a=Object(i.useState)({assigned_to:"",id_worker:""}),t=Object(l.a)(a,2),b=t[0],v=t[1],h=Object(i.useState)(!1),y=Object(l.a)(h,2),k=y[0],j=y[1],O=Object(i.useState)([]),C=Object(l.a)(O,2),w=C[0],S=C[1],q=Object(i.useState)([]),P=Object(l.a)(q,2),x=P[0],N=P[1],z=function(e){if("assigned_to"===e.target.name){var a,t="true"===e.target.value;R(t),v(Object(r.a)(Object(r.a)({},b),{},(a={},Object(n.a)(a,e.target.name,t),Object(n.a)(a,"id_worker",""),a)))}else v(Object(r.a)(Object(r.a)({},b),{},Object(n.a)({},e.target.name,e.target.value)))},H=function(){v({assigned_to:"",id_worker:""}),N([]),S([])},R=function(a){var t=a?1:2,n=f.a+"ownership_ss_task_personal_contractor_task/"+t+"/"+e.task.id;E.a.get(n).then((function(e){a?(S(e.data),N([])):(S([]),N(e.data))})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))};return o.a.createElement(c.a,{show:e.show,onHide:e.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"},o.a.createElement(c.a.Header,{closeButton:!0,style:{backgroundColor:"black",color:"white"}},o.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"},"Agregar personal a la Tarea ",o.a.createElement(g.i,null))),o.a.createElement(c.a.Body,null,o.a.createElement(s.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void j(!0);var n=Object.assign({},b);""!==n.assigned_to?e.submit(n).then((function(a){p.b.success("Tarea Agregada"),H(),e.onHide()})).catch((function(e){p.b.error(e)})):p.b.error("Debe elegir a que tipo de Invididuo se le asignar\xe1 la tarea")},noValidate:!0,validated:k},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:{span:3,offset:9},md:{span:3,offset:9},lg:{span:3,offset:9}},o.a.createElement("p",{style:{color:"red"}},"Campos requeridos*"))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:7,lg:7,md:7},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,lg:12,md:12},o.a.createElement("b",null,"Asignado A:"))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,lg:6,md:6},o.a.createElement("label",null,o.a.createElement("input",{type:"radio",name:"assigned_to",id:"assigned_to1",value:!0,onChange:z}),"Personal de Postventa")),o.a.createElement(d.a,{sm:6,lg:6,md:6},o.a.createElement("label",null,o.a.createElement("input",{type:"radio",name:"assigned_to",id:"assigned_to2",value:!1,onChange:z}),"Contratistas")))),o.a.createElement(_.a,{type:"select",required:!0,name:"id_worker",value:b.id_worker,handleChange:z,label:"Invididuo",messageErrors:["Requerido*"],cols:"col-md-5 col-sm-5 col-lg-5"},o.a.createElement("option",{value:""},"--Seleccione--"),w.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name+" "+e.last_names)})),x.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name)})))),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"submit",variant:"primary",block:!0},"Agregar")),o.a.createElement(d.a,{sm:4,md:4,lg:4},o.a.createElement(m.a,{size:"sm",type:"button",variant:"danger",block:!0,onClick:e.onHide},"Cerrar"))))))}},624:function(e,a,t){"use strict";var n=t(18),r=t(44),l=t(30),i=t(1),o=t.n(i),c=t(567),s=t(568),u=t(282),d=t(280),m=t(10),g=t(34),p=t(13),f=t(112),b=t(25),E=t.n(b),_=t(571),v=t(289),h=t(585),y=t(599),k=t(582),j=t.n(k);a.a=function(e){var a=Object(i.useState)({id_tipology_failure:"",id_point_failure:"",id_reason_failure:"",id_status:"",material_cost:"",workforce_cost:"",third_party_cost:"",filename:"",file:"",date_close:"",id_reason_close:"",detail_close:""}),t=Object(l.a)(a,2),b=t[0],k=t[1],O=Object(i.useState)(!1),C=Object(l.a)(O,2),w=C[0],S=C[1],q=Object(i.useState)([]),P=Object(l.a)(q,2),x=P[0],N=P[1],z=Object(i.useState)(!1),H=Object(l.a)(z,2),R=H[0],D=H[1];Object(i.useEffect)((function(){var a=Object.assign({},e.failure);k({id_tipology_failure:a.id_tipology_failure,id_point_failure:a.id_point_failure,id_reason_failure:a.id_reason_failure,id_status:a.id_status,material_cost:a.material_cost,workforce_cost:a.workforce_cost,third_party_cost:a.third_party_cost,filename:a.filename,file:"",date_close:a.date_close?v(a.date_close).format("YYYY-MM-DD"):v().tz("America/Santiago").format("YYYY-MM-DD"),id_reason_close:a.id_reason_close,detail_close:a.detail_close}),e.failure.tipology&&N(e.failure.tipology.point_failures)}),[e.failure]);var F=function(e){var a,t;(e.persist(),"id_tipology_failure"===e.target.name)?(A(e.target.value),k(Object(r.a)(Object(r.a)({},b),{},(a={},Object(n.a)(a,e.target.name,e.target.value),Object(n.a)(a,"id_point_failure",""),a)))):"id_status"===e.target.name&&5!=e.target.value?k(Object(r.a)(Object(r.a)({},b),{},(t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"id_reason_close",""),Object(n.a)(t,"detail_close",""),Object(n.a)(t,"date_close",""),t))):k(Object(r.a)(Object(r.a)({},b),{},Object(n.a)({},e.target.name,e.target.value)))},A=function(e){E.a.get(g.a+"params_manage_problems_point_failures_by_tipology/"+e).then((function(e){N(e.data)})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))},T=function(){D(!R)},M=function(){k(Object(r.a)(Object(r.a)({},b),{},{file:""})),document.getElementById("file_input"+e.failure.id).value="",document.getElementById("file_input"+e.failure.id).src="",S(!1)};return o.a.createElement(c.a,{fluid:!0},o.a.createElement(s.a,null,o.a.createElement(u.a,{sm:12,md:12,lg:12},o.a.createElement(s.a,{className:"justify-content-center"},o.a.createElement(u.a,{sm:5,md:5,lg:5},o.a.createElement(d.a,{variant:"link",size:"sm",type:"button",block:!0,onClick:T},"Agregar Seguimiento"))),o.a.createElement("br",null),o.a.createElement(m.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void S(!0);var n=new FormData;Object.keys(b).forEach((function(e,a){n.append(e,b[e])}));var r=e.area?g.a+"area_failure_ss/":g.a+"ownership_failure_ss/";E.a.put(r+e.failure.id,n).then((function(a){p.b.success("Falla Modificada"),e.fetchData(),M()})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))},noValidate:!0,validated:w},o.a.createElement(s.a,null,o.a.createElement(f.a,{type:"select",required:!0,name:"id_tipology_failure",id:"id_tipology_failure"+e.failure.id,value:b.id_tipology_failure,label:"Tipologia de Falla:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),e.typologys.map((function(e,a){return o.a.createElement("option",{key:a,value:e.id},e.name)}))),o.a.createElement(f.a,{type:"select",required:!0,name:"id_point_failure",id:"id_point_failure"+e.failure.id,value:b.id_point_failure,label:"Falla Puntual:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),x.map((function(e,a){return o.a.createElement("option",{key:a,value:e.id},e.name)}))),o.a.createElement(f.a,{type:"select",required:!0,name:"id_reason_failure",id:"id_reason_failure"+e.failure.id,value:b.id_reason_failure,label:"Motivo de Falla:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),e.reasonFailure.map((function(e,a){return o.a.createElement("option",{key:a,value:e.id},e.name)}))),o.a.createElement(f.a,{type:"select",required:!0,name:"id_status",id:"id_status"+e.failure.id,value:b.id_status,label:"Estado:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-3 col-sm-3 col-lg-3"},o.a.createElement("option",{value:""},"--Seleccione--"),e.statusFailure.map((function(e,a){return o.a.createElement("option",{key:a,value:e.id},e.status)})))),5==b.id_status?o.a.createElement(s.a,null,o.a.createElement(f.a,{type:"date",required:!0,name:"date_close",id:"date_close"+e.failure.id,value:b.date_close,label:"Fecha de Cierre:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"}),o.a.createElement(f.a,{type:"select",required:!0,name:"id_reason_close",id:"id_reason_close"+e.failure.id,value:b.id_reason_close,label:"Motivo de Cierre:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"},o.a.createElement("option",{value:""},"--Seleccione--"),e.reasonCloses.map((function(e,a){return o.a.createElement("option",{value:e.id,key:a},e.name)}))),o.a.createElement(f.a,{type:"textarea",required:!0,name:"detail_close",id:"detail_close"+e.failure.id,value:b.detail_close,label:"Ingrese detalle/explicaci\xf3n:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"})):"",o.a.createElement(s.a,null,o.a.createElement(f.a,{type:"number",required:!0,name:"material_cost",id:"material_cost"+e.failure.id,value:b.material_cost,label:"Valor de Materiales:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"}),o.a.createElement(f.a,{type:"number",required:!0,name:"workforce_cost",id:"workforce_cost"+e.failure.id,value:b.workforce_cost,label:"Valor Mano de Obra:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"}),o.a.createElement(f.a,{type:"number",required:!0,name:"third_party_cost",id:"third_party_cost"+e.failure.id,value:b.third_party_cost,label:"Valor de Terceros:",handleChange:F,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"})),o.a.createElement(s.a,{className:""},o.a.createElement(u.a,{sm:2,md:2,lg:2},o.a.createElement(d.a,{variant:"link",type:"button",size:"sm",onClick:function(){E.a.get(g.a+"ownership_ss_file/"+e.failure.filename,{responseType:"blob"}).then((function(a){j.a.saveAs(a.data,e.failure.filename)})).catch((function(e){e.response?p.b.error(e.response.data.message):p.b.error("Error, contacte con soporte")}))}},b.filename?b.filename:"")),o.a.createElement(u.a,{sm:4,md:4,lg:4},o.a.createElement(d.a,{variant:"secondary",block:!0,type:"button",size:"sm",onClick:function(){document.getElementById("file_input"+e.failure.id).click()}},"Agregar Documento"),o.a.createElement("br",null),o.a.createElement("input",{type:"file",id:"file_input"+e.failure.id,onChange:function(e){k(Object(r.a)(Object(r.a)({},b),{},{file:e.target.files[0],filename:e.target.files[0].name}))},style:{display:"none"},required:!1})),o.a.createElement(u.a,{sm:4,md:4,lg:4},o.a.createElement(d.a,{variant:"success",size:"sm",type:"submit",block:!0},"Guardar"))))),o.a.createElement(u.a,{sm:12,md:12,lg:12},o.a.createElement("br",null),o.a.createElement(_.a,{columns:h.b,data:e.failure.following_failure,letrasChicas:!0}))),o.a.createElement(y.a,{show:R,onHide:T,submit:function(a){return new Promise((function(t,n){a.id_ownership_ss=e.failure.id_ownership_ss,a.id_failure_ownership_ss=e.failure.id,E.a.post(g.a+"ownership_ss_following",a).then((function(a){e.fetchData(),t({})})).catch((function(e){e.response?n(e.response.data.message):n("Error,contacte con soporte")}))}))},title:"Agregar Nuevo Seguimiento a la Falla"}))}}}]);
//# sourceMappingURL=6.28cf5948.chunk.js.map