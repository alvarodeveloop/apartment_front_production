{"version":3,"sources":["pages/masters/PrecintFormPage.jsx"],"names":["PrecintFormPage","props","useState","validated","setValidated","families","setFamilies","brands","setBrands","models","setModels","units","setUnits","code","name","id_family","id_brand","id_models","id_measurement_unit","additional_information","data","setData","inputRef","useRef","useEffect","fetchData","current","focus","promises","axios","get","API_URL","match","params","id","push","Promise","all","then","result","catch","err","response","toast","error","message","onChange","e","target","value","gotBackToTable","history","replace","clearForm","className","sm","md","lg","xs","onSubmit","form","currentTarget","preventDefault","checkValidity","stopPropagation","objectPost","Object","assign","put","success","post","noValidate","inputCode","handleChange","ref","inputName","inputFamily","map","v","i","key","inputModels","inputBrand","inputUnit","inputAdditionalInformation","type","size","variant","block","onClick","defaultProps","required","label","messageErrors","cols"],"mappings":"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","file":"static/js/76.db2d8c32.chunk.js","sourcesContent":["import React, { useState , useEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Form\r\n} from 'react-bootstrap'\r\nimport InputField from 'components/input/InputComponent'\r\nimport InputFieldRef from 'components/input/InputComponentRef'\r\nimport axios from 'axios'\r\nimport { API_URL } from 'utils/constants'\r\nimport { toast } from 'react-toastify';\r\n\r\nconst PrecintFormPage = (props) => {\r\n\r\n  const [validated, setValidated] = useState(false)\r\n  const [families, setFamilies] = useState([])\r\n  const [brands, setBrands] = useState([])\r\n  const [models, setModels] = useState([])\r\n  const [units, setUnits] = useState([])\r\n  const [data, setData] = useState({\r\n    code:'',\r\n    name: '',\r\n    id_family: '',\r\n    id_brand: '',\r\n    id_models: '',\r\n    id_measurement_unit: '',\r\n    additional_information: '',\r\n  })\r\n\r\n  const inputRef = useRef(null)\r\n  useEffect(() => {\r\n\r\n    fetchData()\r\n    inputRef.current.focus()\r\n  },[])\r\n\r\n  const fetchData = () => {\r\n    let promises = [\r\n      axios.get(API_URL+'master_families'),\r\n      axios.get(API_URL+'master_brand'),\r\n      axios.get(API_URL+'master_models'),\r\n      axios.get(API_URL+'master_measurement_unit')\r\n    ]\r\n\r\n    if(props.match.params.id){\r\n      promises.push(\r\n        axios.get(API_URL+'master_precint/'+props.match.params.id)\r\n      )\r\n    }\r\n\r\n    Promise.all(promises).then(result => {\r\n\r\n      setFamilies(result[0].data)\r\n      setBrands(result[1].data)\r\n      setModels(result[2].data)\r\n      setUnits(result[3].data)\r\n\r\n      if(result[4]){\r\n        setData({\r\n          code: result[4].data.code,\r\n          name: result[4].data.name,\r\n          id_family: result[4].data.id_family,\r\n          id_brand: result[4].data.id_brand,\r\n          id_models: result[4].data.id_models,\r\n          id_measurement_unit: result[4].data.id_measurement_unit,\r\n          additional_information: result[4].data.additional_information,\r\n        })\r\n      }\r\n\r\n    }).catch(err => {\r\n      if(err.response){\r\n        toast.error(err.response.data.message)\r\n      }else{\r\n        toast.error('Error, contacte con soporte')\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  const onChange = e => {\r\n    setData({...data, [e.target.name]: e.target.value})\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n\r\n    const form = e.currentTarget;\r\n\r\n    e.preventDefault();\r\n    if (form.checkValidity() === false) {\r\n      e.stopPropagation();\r\n      setValidated(true);\r\n      return\r\n    }\r\n\r\n    let objectPost = Object.assign({},data)\r\n\r\n    if(objectPost.id){\r\n      axios.put(API_URL+'master_precint/'+objectPost.id,objectPost).then(result => {\r\n        toast.success('Registro Modificado')\r\n        gotBackToTable()\r\n      }).catch(err => {\r\n        if(err.response){\r\n          toast.error(err.response.data.message)\r\n        }else{\r\n          toast.error('Error, contacte con soporte')\r\n        }\r\n      })\r\n    }else{\r\n      axios.post(API_URL+'master_precint',objectPost).then(result => {\r\n        toast.success('Registro Creado')\r\n        clearForm()\r\n      }).catch(err => {\r\n        if(err.response){\r\n          toast.error(err.response.data.message)\r\n        }else{\r\n          toast.error('Error, contacte con soporte')\r\n        }\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const gotBackToTable = () => {\r\n    props.history.replace('/masters/enclosure')\r\n  }\r\n\r\n  const clearForm = () => {\r\n    setData({\r\n      code:'',\r\n      name: '',\r\n      id_family: '',\r\n      id_brand: '',\r\n      id_models: '',\r\n      id_measurement_unit: '',\r\n      additional_information: '',\r\n    })\r\n    setValidated(false)\r\n    inputRef.current.focus()\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Row className=\"containerDiv\">\r\n        <Col sm={12} md={12} lg={12} xs={12} className=\"text-right\">\r\n          <span className=\"text-danger\">*Campos Obligatorios</span>\r\n          <br/><br/>\r\n        </Col>\r\n        <Col sm={12} md={12} lg={12}>\r\n          <Form onSubmit={handleSubmit} noValidate validated={validated}>\r\n            <Row>\r\n              <InputFieldRef\r\n                {...props.inputCode}\r\n                value={data.code}\r\n                handleChange={onChange}\r\n                ref={inputRef}\r\n              />\r\n              <InputField\r\n                {...props.inputName}\r\n                value={data.name}\r\n                handleChange={onChange}\r\n              />\r\n            </Row>\r\n            <Row>\r\n              <InputField\r\n                {...props.inputFamily}\r\n                value={data.id_family}\r\n                handleChange={onChange}\r\n              >\r\n                <option value=''>--Seleccione--</option>\r\n                {families.map((v,i) => (\r\n                  <option value={v.id} key={i}>{v.name}</option>\r\n                ))}\r\n              </InputField>\r\n              <InputField\r\n                {...props.inputModels}\r\n                value={data.id_models}\r\n                handleChange={onChange}\r\n              >\r\n                <option value=''>--Seleccione--</option>\r\n                {models.map((v,i) => (\r\n                  <option value={v.id} key={i}>{v.name}</option>\r\n                ))}\r\n              </InputField>\r\n              <InputField\r\n                {...props.inputBrand}\r\n                value={data.id_brand}\r\n                handleChange={onChange}\r\n              >\r\n                <option value=''>--Seleccione--</option>\r\n                {brands.map((v,i) => (\r\n                  <option value={v.id} key={i}>{v.name}</option>\r\n                ))}\r\n              </InputField>\r\n            </Row>\r\n            <Row>\r\n              <InputField\r\n                {...props.inputUnit}\r\n                value={data.id_measurement_unit}\r\n                handleChange={onChange}\r\n              >\r\n                <option value=''>--Seleccione--</option>\r\n                {units.map((v,i) => (\r\n                  <option value={v.id} key={i}>{v.name}</option>\r\n                ))}\r\n              </InputField>\r\n              <InputField\r\n                {...props.inputAdditionalInformation}\r\n                value={data.additional_information}\r\n                handleChange={onChange}\r\n              />\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col sm={4} md={4} lg={4}>\r\n                <Button type=\"submit\" size=\"sm\" variant=\"primary\" block={true}>Guardar</Button>\r\n              </Col>\r\n              <Col sm={4} md={4} lg={4}>\r\n                <Button type=\"submit\" size=\"sm\" variant=\"danger\" block={true} onClick={gotBackToTable}>Volver</Button>\r\n              </Col>\r\n            </Row>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  )\r\n}\r\n\r\nPrecintFormPage.defaultProps = {\r\n  inputCode: {\r\n    type: 'text',\r\n    required: true,\r\n    name: 'code',\r\n    label : 'Código',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputName: {\r\n    type: 'text',\r\n    required: true,\r\n    name: 'name',\r\n    label : 'Nombre',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputFamily: {\r\n    type: 'select',\r\n    required: true,\r\n    name: 'id_family',\r\n    label : 'Categoria',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-4 col-md-4 col-lg-4 col-xs-4\"\r\n  },\r\n  inputModels: {\r\n    type: 'select',\r\n    required: false,\r\n    name: 'id_models',\r\n    label : 'Modelo',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-4 col-md-4 col-lg-4 col-xs-4\"\r\n  },\r\n  inputUnit: {\r\n    type: 'select',\r\n    required: true,\r\n    name: 'id_measurement_unit',\r\n    label : 'Unidad de Medida',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-4 col-md-4 col-lg-4 col-xs-4\"\r\n  },\r\n  inputBrand: {\r\n    type: 'select',\r\n    required: true,\r\n    name: 'id_brand',\r\n    label : 'Marca',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-4 col-md-4 col-lg-4 col-xs-4\"\r\n  },\r\n  inputAdditionalInformation: {\r\n    type: 'textarea',\r\n    required: false,\r\n    name: 'additional_information',\r\n    label : 'Información Adicional',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-4 col-md-4 col-lg-4 col-xs-4\"\r\n  },\r\n}\r\n\r\nexport default PrecintFormPage\r\n"],"sourceRoot":""}