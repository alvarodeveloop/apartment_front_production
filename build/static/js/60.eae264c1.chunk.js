(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[60],{571:function(e,a,t){"use strict";var n=t(18),l=t(574),r=t(1),c=t.n(r),s=t(577),o=t(575),i=t(576),m=t(280);function u(){var e=Object(l.a)(["\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return u=function(){return e},e}var d=s.a.div(u());function g(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,l=a.setFilter,r=n.length;return c.a.createElement("input",{value:t||"",onChange:function(e){l(e.target.value||void 0)},placeholder:"Buscar en ".concat(r," registros..."),className:"inputPageFilter"})}function b(e,a,t){return Object(i.a)(e,t,{keys:[function(e){return e.values[a]}]})}function E(e){var a=e.columns,t=e.data,l=e.displayPaginationUp,r=e.letrasChicas,s=c.a.useMemo((function(){return{fuzzyText:b,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),i=c.a.useMemo((function(){return{Filter:g}}),[]),u=Object(o.useTable)({columns:a,data:t,defaultColumn:i,filterTypes:s,initialState:{pageIndex:0}},o.useFilters,o.useSortBy,o.usePagination),d=u.getTableProps,E=u.getTableBodyProps,p=u.headerGroups,h=u.page,f=u.prepareRow,v=u.canPreviousPage,N=u.canNextPage,y=u.pageOptions,_=u.pageCount,k=u.gotoPage,j=u.nextPage,C=u.previousPage,x=u.setPageSize,O=u.state,P=O.pageIndex,S=O.pageSize;return c.a.createElement("div",{className:"table-responsive"},l?c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return k(0)},disabled:!v},"<<")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!v},"<")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!N},">")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return k(_-1)},disabled:!N},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,P+1," de ",y.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:P+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;k(a)},className:"inputPage"},"onChange",(function(e){e.target.value>y.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:S,onChange:function(e){x(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},d(),{className:"table table-bordered"}),c.a.createElement("thead",null,p.map((function(e,a){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center",key:a}),e.headers.map((function(e,a){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera",style:{fontSize:r?"14px":"15px"},key:a}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},E(),{className:"text-center",style:{fontSize:r?"13px":"15px"}}),h.map((function(e,a){return f(e)||c.a.createElement("tr",Object.assign({},e.getRowProps(),{key:a+"-"}),e.cells.map((function(e,a){return c.a.createElement("td",Object.assign({},e.getCellProps(),{key:a+"td"}),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return k(0)},disabled:!v},"<<")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!v},"<")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!N},">")," ",c.a.createElement(m.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return k(_-1)},disabled:!N},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,P+1," de ",y.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:P+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;k(a)},className:"inputPage"},"onChange",(function(e){e.target.value>y.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:S,onChange:function(e){x(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}b.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.displayPaginationUp,l=e.letrasChicas;return c.a.createElement(d,null,c.a.createElement(E,{data:a,columns:t,displayPaginationUp:n,letrasChicas:l}))}},596:function(e,a,t){},750:function(e,a,t){"use strict";t.r(a);var n=t(18),l=t(44),r=t(30),c=t(1),s=t.n(c),o=t(567),i=t(568),m=t(282),u=t(10),d=t(280),g=(t(571),t(25)),b=t.n(g),E=t(288),p=t(112),h=t(34),f=t(13),v=t(289),N=(t(596),t(611)),y={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0},_={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},k={labels:[],datasets:[{label:"Fallas(Observaciones) por Tipolog\xeda",backgroundColor:"rgb(63, 27, 184)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(63, 27, 184)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]};a.default=function(e){var a=Object(c.useState)({id_housing_complexe:"",date_from:"",date_to:"",id_status:""}),t=Object(r.a)(a,2),g=t[0],j=t[1],C=Object(c.useState)("Buscar..."),x=Object(r.a)(C,2),O=x[0],P=(x[1],Object(c.useState)(!1)),S=Object(r.a)(P,2),T=S[0],F=S[1],z=Object(c.useState)([]),w=Object(r.a)(z,2),B=w[0],D=w[1],I=Object(c.useState)({}),Y=Object(r.a)(I,2),M=Y[0],R=Y[1],q=Object(c.useState)([]),A=Object(r.a)(q,2),V=A[0],H=A[1],W=Object(c.useState)([]),U=Object(r.a)(W,2),G=U[0],J=U[1],L=Object(c.useState)([]),K=Object(r.a)(L,2),Q=K[0],X=K[1],Z=Object(c.useState)(!1),$=Object(r.a)(Z,2),ee=$[0],ae=$[1],te=Object(c.useState)(!1),ne=Object(r.a)(te,2),le=ne[0],re=ne[1],ce=Object(c.useState)([]),se=Object(r.a)(ce,2),oe=se[0],ie=se[1],me=Object(c.useState)(!0),ue=Object(r.a)(me,2),de=ue[0],ge=ue[1],be=Object(c.useState)(!0),Ee=Object(r.a)(be,2),pe=Ee[0],he=Ee[1];Object(c.useEffect)((function(){return fe(),function(){_={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},k={labels:[],datasets:[{label:"Fallas(Observaciones) por Tipolog\xeda",backgroundColor:"rgb(63, 27, 184)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(63, 27, 184)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]}}}),[]),Object(c.useEffect)((function(){ee&&ve()}),[ee]),Object(c.useEffect)((function(){le&&Ne()}),[le]);var fe=function(){var e=[b.a.get(h.a+"housing_complexe"),b.a.get(h.a+"get_status_close")];Promise.all(e).then((function(e){D(e[0].data),ie(e[1].data)})).catch((function(e){e.response?f.b.error(e.response.data.message):(console.log(e),f.b.error("Error, contacte con soporte"))}))},ve=function(){V.forEach((function(e,a){_.labels.push(e.status+"%"),_.datasets[0].data.push(parseFloat(e.porcentaje)),_.datasets[0].backgroundColor.push(h.b[a]),_.datasets[0].hoverBackgroundColor.push(h.b[a])}))},Ne=function(){G.forEach((function(e,a){k.labels.push(e.name),k.datasets[0].data.push(e.total)}))},ye=function(e){j(Object(l.a)(Object(l.a)({},g),{},Object(n.a)({},e.target.name,e.target.value)))},_e=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=0;if(a){switch(a){case"pendiente":e.forEach((function(e,a){t+=e.total_pendiente}));break;case"ejecucion":e.forEach((function(e,a){t+=e.total_ejecucion}));break;case"no_aplica":e.forEach((function(e,a){t+=e.total_no_aplica}));break;case"Cerrada":e.forEach((function(e,a){t+=e.total_cerrada}))}return t}return e.forEach((function(e,a){t+=e.total})),t};return s.a.createElement(o.a,{fluid:!0},s.a.createElement(i.a,{className:"containerDiv"},s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("h4",{className:"text-center title_principal"},"INDICADORES DE POSTVENTA (Por Proyecto y Rango de Fecha)")),s.a.createElement(m.a,{sm:12,md:12,lg:12,style:{display:de?"block":"none"}},s.a.createElement(u.a,{onSubmit:function(e){var a=e.currentTarget;if(e.preventDefault(),!1===a.checkValidity())return e.stopPropagation(),void F(!0);var t=Object.assign({},g);b.a.post(h.a+"indicators_by_proyect",t).then((function(e){R(e.data.housing_data),H(e.data.ss_status),J(e.data.failure_by_tipology),X(e.data.failure_by_tipology_status),setTimeout((function(){ae(!0),re(!0),ge(!1)}),500)})).catch((function(e){e.response?f.b.error(e.response.data.message):(console.log(e),f.b.error("Error, contacte con soporte"))}))},noValidate:!0,validated:T},s.a.createElement(i.a,null,s.a.createElement(E.a,{type:"select",name:"id_housing_complexe",label:"Proyecto",required:!0,cols:"col-md-4 col-sm-4 col-lg-4",messageErrors:["Requerido*"],value:g.id_housing_complexe,handleChange:ye},s.a.createElement("option",{value:""},"--Seleccione--"),B.map((function(e,a){return s.a.createElement("option",{value:e.id,key:a},e.name)}))),s.a.createElement(p.a,{type:"date",name:"date_from",label:"Desde",required:!0,cols:"col-md-4 col-sm-4 col-lg-4",messageErrors:["Requerido*"],value:g.date_from,handleChange:ye}),s.a.createElement(p.a,{type:"date",name:"date_to",label:"Hasta",required:!0,cols:"col-md-4 col-sm-4 col-lg-4",messageErrors:["Requerido*"],value:g.date_to,handleChange:ye})),s.a.createElement(i.a,null,s.a.createElement(p.a,{type:"select",name:"id_status",label:"Status",required:!1,cols:"col-md-4 col-sm-4 col-lg-4",messageErrors:[""],value:g.id_status,handleChange:ye},s.a.createElement("option",{value:""},"--Seleccione--"),oe.map((function(e,a){return s.a.createElement("option",{key:a,value:e.id},e.status)})))),s.a.createElement(i.a,{className:"justify-content-center"},s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(d.a,{variant:"secondary",block:!0,size:"sm",type:"submit"},O))))),s.a.createElement(m.a,{sm:12,md:12,lg:12,style:{display:de?"none":"block"}},s.a.createElement("br",null),s.a.createElement(i.a,null,s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(i.a,null,s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Proyecto Inmobiliario:\xa0\xa0")," ",M.name),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Fecha Recepci\xf3n Mun.:\xa0\xa0"),v(M.date_municipal_reception).format("DD-MM-YYYY")),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Nro. Viviendas:\xa0\xa0")," ",M.number_living))),s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Estado:\xa0\xa0")," ",function(){var e="Todos los estados";switch(parseInt(g.id_status,10)){case 1:e="Pendiente";break;case 2:e="Inspecci\xf3n";break;case 3:e="Ejecuci\xf3n";break;case 4:e="No Aplica";break;case 5:e="Cerrada";break;case 6:e="Anulada";break;case 7:e="En proceso"}return e}()),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Fecha Inicio:\xa0\xa0"),v(g.date_from).format("DD-MM-YYYY")),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"Fecha T\xe9rmino:\xa0\xa0"),v(g.date_to).format("DD-MM-YYYY"))),s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"IPS: ")," 0"),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"IPC: ")," 0"),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("b",null,"IPE: ")," 0"))),s.a.createElement("br",null),s.a.createElement(i.a,null,s.a.createElement(m.a,{sm:6,md:6,lg:6},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"header_th_classs",colSpan:"3"},"Solicitudes por Estado")),s.a.createElement("tr",null,s.a.createElement("th",{className:"th_class"},"Estados"),s.a.createElement("th",{className:"th_class"},"Cantidad"),s.a.createElement("th",{className:"th_class"},"Porcentaje"))),s.a.createElement("tbody",{className:""},V.map((function(e,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.status),s.a.createElement("td",{className:"text-right"},e.total),s.a.createElement("td",{className:"text-right"},e.porcentaje,"%"))})),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Total")),s.a.createElement("td",{className:"text-right"},_e(V)),s.a.createElement("td",{className:"text-right"},s.a.createElement("b",null,"100.00%")))))),s.a.createElement(m.a,{sm:6,md:6,lg:6},s.a.createElement(N.b,{data:_,redraw:ee,options:y}))),s.a.createElement("br",null),s.a.createElement(i.a,null,s.a.createElement(m.a,{sm:6,md:6,lg:6},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"header_th_classs",colSpan:"3"},"Total de Fallas(Observaciones) por Tipolog\xeda")),s.a.createElement("tr",null,s.a.createElement("th",{className:"th_class"},"Fallas"),s.a.createElement("th",{className:"th_class"},"Cantidad"),s.a.createElement("th",{className:"th_class"},"Porcentaje"))),s.a.createElement("tbody",{className:""},G.map((function(e,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.name),s.a.createElement("td",{className:"text-right"},e.total),s.a.createElement("td",{className:"text-right"},e.porcentaje,"%"))})),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Total")),s.a.createElement("td",{className:"text-right"},_e(G)),s.a.createElement("td",{className:"text-right"},s.a.createElement("b",null,"100.00%")))))),s.a.createElement(m.a,{sm:6,md:6,lg:6},s.a.createElement(N.a,{data:k,options:y,redraw:ee}))),s.a.createElement("br",null),s.a.createElement(i.a,{className:"justify-content-center"},s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"header_th_classs",colSpan:"7"},"Total de Fallas(Observaciones) por Tipolog\xeda y Estado")),s.a.createElement("tr",null,s.a.createElement("th",{className:"th_class"},"Fallas"),s.a.createElement("th",{className:"th_class"},"Pendiente"),s.a.createElement("th",{className:"th_class"},"Ejecuci\xf3n"),s.a.createElement("th",{className:"th_class"},"No Aplica"),s.a.createElement("th",{className:"th_class"},"Cerrada"),s.a.createElement("th",{className:"th_class"},"Total"),s.a.createElement("th",{className:"th_class"},"Porcentaje"))),s.a.createElement("tbody",{className:""},Q.map((function(e,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.name),s.a.createElement("td",{className:"text-right"},e.total_pendiente),s.a.createElement("td",{className:"text-right"},e.total_ejecucion),s.a.createElement("td",{className:"text-right"},e.total_no_aplica),s.a.createElement("td",{className:"text-right"},e.total_cerrada),s.a.createElement("td",{className:"text-right"},e.total),s.a.createElement("td",{className:"text-right"},e.porcentaje,"%"))})),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Total")),s.a.createElement("td",{className:"text-right"},_e(Q,"pendiente")),s.a.createElement("td",{className:"text-right"},_e(Q,"ejecucion")),s.a.createElement("td",{className:"text-right"},_e(Q,"no_aplica")),s.a.createElement("td",{className:"text-right"},_e(Q,"cerrada")),s.a.createElement("td",{className:"text-right"},_e(Q)),s.a.createElement("td",{className:"text-right"},s.a.createElement("b",null,"100.00%"))))))),pe?s.a.createElement(i.a,{className:"justify-content-center"},s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(d.a,{variant:"secondary",size:"sm",block:!0,onClick:function(){he(!1),setTimeout((function(){window.print()}),400),setTimeout((function(){he(!0)}),1500)}},"Imprimir Pdf")),s.a.createElement(m.a,{sm:4,md:4,lg:4},s.a.createElement(d.a,{variant:"secondary",size:"sm",block:!0,onClick:function(){_={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},k={labels:[],datasets:[{label:"Fallas(Observaciones) por Tipolog\xeda",backgroundColor:"rgb(63, 27, 184)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(63, 27, 184)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]},ge(!0),ae(!1),re(!1)}},"Nueva Consulta"))):"")))}}}]);
//# sourceMappingURL=60.eae264c1.chunk.js.map