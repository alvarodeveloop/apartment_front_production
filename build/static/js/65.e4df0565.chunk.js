(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[65],{571:function(e,a,t){"use strict";var n=t(18),r=t(574),l=t(1),c=t.n(l),o=t(577),s=t(575),i=t(576),u=t(280);function m(){var e=Object(r.a)(["\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return m=function(){return e},e}var d=o.a.div(m());function p(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,r=a.setFilter,l=n.length;return c.a.createElement("input",{value:t||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function g(e,a,t){return Object(i.a)(e,t,{keys:[function(e){return e.values[a]}]})}function b(e){var a=e.columns,t=e.data,r=e.displayPaginationUp,l=e.letrasChicas,o=c.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),i=c.a.useMemo((function(){return{Filter:p}}),[]),m=Object(s.useTable)({columns:a,data:t,defaultColumn:i,filterTypes:o,initialState:{pageIndex:0}},s.useFilters,s.useSortBy,s.usePagination),d=m.getTableProps,b=m.getTableBodyProps,E=m.headerGroups,f=m.page,h=m.prepareRow,_=m.canPreviousPage,v=m.canNextPage,k=m.pageOptions,y=m.pageCount,w=m.gotoPage,j=m.nextPage,x=m.previousPage,O=m.setPageSize,C=m.state,N=C.pageIndex,P=C.pageSize;return c.a.createElement("div",{className:"table-responsive"},r?c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w(0)},disabled:!_},"<<")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!_},"<")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!v},">")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w(y-1)},disabled:!v},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,N+1," de ",k.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:N+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;w(a)},className:"inputPage"},"onChange",(function(e){e.target.value>k.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:P,onChange:function(e){O(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},d(),{className:"table table-bordered"}),c.a.createElement("thead",null,E.map((function(e,a){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center",key:a}),e.headers.map((function(e,a){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera",style:{fontSize:l?"14px":"15px"},key:a}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},b(),{className:"text-center",style:{fontSize:l?"13px":"15px"}}),f.map((function(e,a){return h(e)||c.a.createElement("tr",Object.assign({},e.getRowProps(),{key:a+"-"}),e.cells.map((function(e,a){return c.a.createElement("td",Object.assign({},e.getCellProps(),{key:a+"td"}),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w(0)},disabled:!_},"<<")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!_},"<")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!v},">")," ",c.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w(y-1)},disabled:!v},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,N+1," de ",k.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:N+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;w(a)},className:"inputPage"},"onChange",(function(e){e.target.value>k.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:P,onChange:function(e){O(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.displayPaginationUp,r=e.letrasChicas;return c.a.createElement(d,null,c.a.createElement(b,{data:a,columns:t,displayPaginationUp:n,letrasChicas:r}))}},617:function(e,a,t){"use strict";var n=t(1),r=t.n(n),l=t(567),c=t(568),o=t(282);a.a=function(e){return r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:6,md:6,lg:6},r.a.createElement("h4",{className:"text-center"},"Propietario"),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Solicita",r.a.createElement("br",null),r.a.createElement("b",null,e.user.name))),r.a.createElement("br",null),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Tel\xe9fono:",r.a.createElement("br",null),r.a.createElement("b",null,e.ownership?e.ownership.ownership.ownership_client.phone_1?e.ownership.ownership.ownership_client.phone_1:"no posee":""))),r.a.createElement("br",null),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Correo Electr\xf3nico:",r.a.createElement("br",null),r.a.createElement("b",null,e.user.email),r.a.createElement("br",null)))),r.a.createElement(o.a,{sm:6,md:6,lg:6},r.a.createElement("h4",{className:"text-center"},"Propiedad"),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"N\xfamero:",r.a.createElement("br",null),r.a.createElement("b",null,e.ownership?e.ownership.ownership.number:""))),r.a.createElement("br",null),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Proyecto:",r.a.createElement("br",null),r.a.createElement("b",null,e.ownership?e.ownership.ownership.housing_complexe.name_client_administration:""))),r.a.createElement("br",null),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Estacionamiento(s):",r.a.createElement("br",null),e.ownership?r.a.createElement(r.a.Fragment,null,e.ownership.ownership.parkings.filter((function(e){return 2==e.type})).map((function(e,a){return r.a.createElement("span",{key:a},r.a.createElement("b",null,e.name),r.a.createElement("br",null))}))):"",r.a.createElement("b",null))),r.a.createElement("br",null),r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:12,md:12,lg:12},"Bodega(s):",r.a.createElement("br",null),e.ownership?r.a.createElement(r.a.Fragment,null,e.ownership.ownership.parkings.filter((function(e){return 1==e.type})).map((function(e){return r.a.createElement("span",null,r.a.createElement("b",null,e.name),r.a.createElement("br",null))}))):"",r.a.createElement("b",null))))))}},794:function(e,a,t){"use strict";t.r(a);var n=t(113),r=t(18),l=t(44),c=t(30),o=t(1),s=t.n(o),i=t(31),u=t(280),m=t(567),d=t(568),p=t(282),g=t(10),b=t(800),E=t(146),f=t(571),h=t(25),_=t.n(h),v=(t(288),t(112)),k=t(34),y=t(13),w=t(617),j=t(289),x=[],O=function(e){var a=Object(o.useState)(!1),t=Object(c.a)(a,2),i=t[0],h=t[1],O=Object(o.useState)(!1),C=Object(c.a)(O,2),N=C[0],P=C[1],F=Object(o.useState)({date_request:j().format("YYYY-MM-DD"),contact_to:"",week_days:[],id_block_hour_from:"",id_block_hour_to:"",note:"",id:""}),S=Object(c.a)(F,2),R=S[0],q=S[1],z=Object(o.useState)({description:"",id_precint:"",id_related_failure:""}),H=Object(c.a)(z,2),D=H[0],T=H[1],B=Object(o.useState)([]),M=Object(c.a)(B,2),V=M[0],Y=M[1],A=Object(o.useState)([]),I=Object(c.a)(A,2),G=I[0],J=I[1],L=Object(o.useState)([]),U=Object(c.a)(L,2),W=U[0],K=U[1],Q=Object(o.useState)([]),X=Object(c.a)(Q,2),Z=X[0],$=X[1];Object(o.useRef)(null);Object(o.useEffect)((function(){}),[e.id_ownership_selected]),Object(o.useEffect)((function(){te(),ne()}),[]),Object(o.useMemo)((function(){x=[{Header:"Recinto",accessor:function(e){return[e.precint.name]}},{Header:"Falla Relacionada",accessor:function(e){return[e.related.name]}},{Header:"Descripci\xf3n",accessor:function(e){return[e.description]}},{Header:"Acci\xf3n",Cell:function(e){var a=e.cell.row.original;return s.a.createElement(u.a,{size:"sm",variant:"danger",block:!0,onClick:function(){return ae(a.id)}},"Remover")}}]}),[]);var ee=function(){P(!N)},ae=function(e){_.a.delete(k.a+"ownership_failure_ss/"+e).then((function(e){oe(),y.b.success("Falla eliminada")})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))},te=function(){_.a.delete(k.a+"ownership_failure_ss_by_ip").then((function(e){console.log("registros borrados")})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))},ne=function(){var a=[_.a.get(k.a+"get_block_hour"),_.a.get(k.a+"master_precint"),_.a.get(k.a+"params_manage_problems_related_failures"),_.a.get(k.a+"master_config_ss")];e.match.params.id&&a.push(_.a.get(k.a+"ownership_failure_ss_by_id_ownership_ss")),Promise.all(a).then((function(a){a[3].data?(Y(a[0].data),J(a[1].data),K(a[2].data),e.match.params.id&&$(a[5].data)):(y.b.error("A\xfan no se encuentra hecha la configuraci\xf3n de esta empresa"),setTimeout((function(){e.history.replace("/dashboard")}),1e3))})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))},re=function(e){T(Object(l.a)(Object(l.a)({},D),{},Object(r.a)({},e.target.name,e.target.value)))},le=function(e){e.persist(),"week_days"===e.target.name?e.target.checked?q(Object(l.a)(Object(l.a)({},R),{},Object(r.a)({},e.target.name,[].concat(Object(n.a)(R.week_days),[e.target.value])))):q(Object(l.a)(Object(l.a)({},R),{},Object(r.a)({},e.target.name,R.week_days.filter((function(a){return a!==e.target.value}))))):q(Object(l.a)(Object(l.a)({},R),{},Object(r.a)({},e.target.name,e.target.value)))},ce=function(){q({date_request:j().format("YYYY-MM-DD"),contact_to:"",week_days:[],id_block_hour_from:"",id_block_hour_to:"",note:"",id:""}),h(!1)},oe=function(){e.match.params.id?_.a.get(k.a+"ownership_failure_ss_by_id_ownership_ss/"+e.match.params.id).then((function(e){$(e.data)})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")})):_.a.get(k.a+"ownership_failure_ss_creating").then((function(e){$(e.data)})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))},se=function(){T({description:"",id_precint:"",id_related_failure:""})};return s.a.createElement(m.a,null,s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(w.a,{ownership:e.ownership,user:e.user}))),s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(g.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void h(!0);var n=Object.assign({},R,{id_ownership:e.id_ownership_selected,id_user:e.ownership.id_user});_.a.post(k.a+"ownership_ss_by_ownership",n).then((function(e){y.b.success("Registro Creado"),ce()})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))},noValidate:!0,validated:i},s.a.createElement("hr",null),s.a.createElement(d.a,null,s.a.createElement(v.a,Object.assign({},e.inputContactTo,{value:R.contact_to,handleChange:le}))),s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:6,md:6,lg:6},s.a.createElement("b",null,s.a.createElement("span",{className:"asterisk_red"},"*"),"D\xedas Posibles de Visita:")),s.a.createElement(p.a,{sm:6,md:6,lg:6},s.a.createElement("b",null,s.a.createElement("span",{className:"asterisk_red"},"*"),"Horario de preferencia:"))),s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"lunes"},s.a.createElement("input",{id:"lunes",type:"checkbox",value:1,checked:!!R.week_days.find((function(e){return"1"==e})),onChange:le,name:"week_days"}),"\xa0Lunes")),s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"martes"},s.a.createElement("input",{id:"martes",type:"checkbox",value:2,checked:!!R.week_days.find((function(e){return"2"==e})),onChange:le,name:"week_days"}),"\xa0Martes")),s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"miercoles"},s.a.createElement("input",{id:"miercoles",type:"checkbox",value:3,checked:!!R.week_days.find((function(e){return"3"==e})),onChange:le,name:"week_days"}),"\xa0Miercoles")),s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"jueves"},s.a.createElement("input",{id:"jueves",type:"checkbox",value:4,checked:!!R.week_days.find((function(e){return"4"==e})),onChange:le,name:"week_days"}),"\xa0Jueves")),s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"viernes"},s.a.createElement("input",{id:"viernes",type:"checkbox",value:5,checked:!!R.week_days.find((function(e){return"5"==e})),onChange:le,name:"week_days"}),"\xa0Viernes")),s.a.createElement(p.a,{sm:1,md:1,lg:1},s.a.createElement("label",{forHtml:"sabado"},s.a.createElement("input",{id:"sabado",type:"checkbox",value:6,checked:!!R.week_days.find((function(e){return"6"==e})),onChange:le,name:"week_days"}),"\xa0Sabado")),s.a.createElement(p.a,{sm:6,md:6,lg:6},s.a.createElement(d.a,null,s.a.createElement(v.a,Object.assign({},e.inputBlockDesde,{value:R.id_block_hour_from,handleChange:le}),s.a.createElement("option",{value:""},"--Seleccione--"),V.map((function(e,a){return s.a.createElement("option",{value:e.id,key:a},e.block)}))),s.a.createElement(v.a,Object.assign({},e.inputBlockHasta,{value:R.id_block_hour_to,handleChange:le}),s.a.createElement("option",{value:""},"--Seleccione--"),V.slice(1,V.length).map((function(e,a){return s.a.createElement("option",{key:a,value:e.id},e.block)}))))),s.a.createElement(v.a,Object.assign({},e.inputNote,{value:R.note,handleChange:le}))),s.a.createElement("hr",null),s.a.createElement("h5",{className:"title_principal"},"Ingreso de Fallas"),s.a.createElement("br",null),s.a.createElement(d.a,null,s.a.createElement(v.a,Object.assign({},e.inputPrecint,{value:D.id_precint,handleChange:re}),s.a.createElement("option",{value:""},"--Seleccione--"),G.map((function(e,a){return s.a.createElement("option",{value:e.id,key:a},e.name)}))),s.a.createElement(v.a,Object.assign({},e.inputRelatedFail,{value:D.id_related_failure,handleChange:re}),s.a.createElement("option",{value:""},"--Seleccione--"),W.map((function(e,a){return s.a.createElement("option",{value:e.id,key:a},e.name)})))),s.a.createElement(d.a,null,s.a.createElement(v.a,Object.assign({},e.inputDescriptionFalil,{value:D.description,handleChange:re})),s.a.createElement(p.a,{sm:10,md:10,lg:10}),s.a.createElement(p.a,{sm:2,md:2,lg:2},s.a.createElement(u.a,{variant:"secondary",block:!0,type:"button",size:"sm",onClick:function(){if(!D.id_precint)return y.b.error("Debe Agregar un recinto"),!1;if(!D.id_related_failure)return y.b.error("Debe agregar una relaci\xf3n de falla"),!1;if(!D.description)return y.b.error("Debe agregar una descripci\xf3n de la falla"),!1;var e=Object.assign({},D);_.a.post(k.a+"ownership_failure_ss",e).then((function(e){se(),oe(),y.b.success("Falla Agregada")})).catch((function(e){e.response?y.b.error(e.response.data.message):y.b.error("Error, contacte con soporte")}))}},"Agregar ",s.a.createElement(E.e,null)))),s.a.createElement("br",null),s.a.createElement(d.a,{className:"justify-content-center"},s.a.createElement(p.a,{sm:3,md:3,lg:3},s.a.createElement(u.a,{size:"sm",variant:"primary",block:!0,type:"submit"},"Guardar ",s.a.createElement(E.g,null))),s.a.createElement(p.a,{sm:3,md:3,lg:3},s.a.createElement(u.a,{size:"sm",variant:"danger",block:!0,type:"button",onClick:function(){e.history.replace("/request/area/status_services")}},"Cancelar")),s.a.createElement(p.a,{sm:3,md:3,lg:3},s.a.createElement(u.a,{size:"sm",variant:"secondary",block:!0,type:"button",onClick:ee},"Ver fallas")))))),s.a.createElement(b.a,{show:N,onHide:ee,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(b.a.Header,{closeButton:!0,className:"header_dark"},s.a.createElement(b.a.Title,{id:"contained-modal-title-vcenter"},"Fallas Registradas")),s.a.createElement(b.a.Body,null,s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(d.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(f.a,{columns:x,data:Z})))))),s.a.createElement(b.a.Footer,null,s.a.createElement(u.a,{variant:"secondary",onClick:ee},"cerrar"))))};O.defaultProps={inputContactTo:{type:"text",required:!1,name:"contact_to",label:"Contactar Con:",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputBlockDesde:{type:"select",required:!0,name:"id_block_hour_from",label:"Desde:",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputBlockHasta:{type:"select",required:!0,name:"id_block_hour_to",label:"Hasta:",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputNotas:{type:"textarea",required:!1,name:"notes",label:"Notas:",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputPrecint:{type:"select",required:!1,name:"id_precint",label:"Recinto:",messageErrors:["Requerido*"],cols:"col-sm-3 col-md-3 col-lg-3 col-xs-3"},inputRelatedFail:{type:"select",required:!1,name:"id_related_failure",label:"Relacione su Falla con:",messageErrors:["Requerido*"],cols:"col-sm-3 col-md-3 col-lg-3 col-xs-3"},inputTipologyFail:{type:"select",required:!1,name:"id_tipology_failure",label:"Tipolog\xeda de Falla:",messageErrors:["Requerido*"],cols:"col-sm-3 col-md-3 col-lg-3 col-xs-3"},inputPointFailure:{type:"select",required:!1,name:"id_point_failure",label:"Falla Puntual:",messageErrors:["Requerido*"],cols:"col-sm-3 col-md-3 col-lg-3 col-xs-3"},inputDescriptionFalil:{type:"textarea",required:!1,name:"description",label:"Descripci\xf3n de la Falla:",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputNote:{type:"textarea",required:!1,name:"note",label:"Notas:",messageErrors:[],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"}},a.default=Object(i.b)((function(e){return{id_ownership_selected:e.ownership.ownership_selected,ownership:e.ownership.ownerships.find((function(a){return a.id_ownership==e.ownership.ownership_selected})),user:e.auth.user}}),{})(O)}}]);
//# sourceMappingURL=65.e4df0565.chunk.js.map