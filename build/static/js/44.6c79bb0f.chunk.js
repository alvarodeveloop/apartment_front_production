(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[44],{580:function(e,a,n){"use strict";var t=n(27),r=n(584),o=n(0),l=n.n(o),s=n(587),c=n(585),i=n(586),u=n(139);function m(){var e=Object(r.a)(["\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return m=function(){return e},e}var p=s.a.div(m());function d(e){var a=e.column,n=a.filterValue,t=a.preFilteredRows,r=a.setFilter,o=t.length;return l.a.createElement("input",{value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(o," registros..."),className:"inputPageFilter"})}function g(e,a,n){return Object(i.a)(e,n,{keys:[function(e){return e.values[a]}]})}function b(e){var a=e.columns,n=e.data,r=e.displayPaginationUp,o=e.letrasChicas,s=l.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,n){return e.filter((function(e){var t=e.values[a];return void 0===t||String(t).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),i=l.a.useMemo((function(){return{Filter:d}}),[]),m=Object(c.useTable)({columns:a,data:n,defaultColumn:i,filterTypes:s,initialState:{pageIndex:0}},c.useFilters,c.useSortBy,c.usePagination),p=m.getTableProps,b=m.getTableBodyProps,f=m.headerGroups,h=m.page,E=m.prepareRow,v=m.canPreviousPage,y=m.canNextPage,_=m.pageOptions,k=m.pageCount,N=m.gotoPage,C=m.nextPage,x=m.previousPage,w=m.setPageSize,P=m.state,O=P.pageIndex,j=P.pageSize;return l.a.createElement("div",{className:"table-responsive"},r?l.a.createElement("div",{className:"pagination"},l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return N(0)},disabled:!v},"<<")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!v},"<")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!y},">")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return N(k-1)},disabled:!y},">>")," ",l.a.createElement("span",null,"P\xe1gina"," ",l.a.createElement("strong",null,O+1," de ",_.length)," "),l.a.createElement("span",{className:"ml-3"},"| ",l.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),l.a.createElement("input",Object(t.a)({type:"number",defaultValue:O+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;N(a)},className:"inputPage"},"onChange",(function(e){e.target.value>_.length&&(e.target.value=1)}))))," ",l.a.createElement("select",{value:j,onChange:function(e){w(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return l.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",l.a.createElement("table",Object.assign({},p(),{className:"table table-bordered"}),l.a.createElement("thead",null,f.map((function(e,a){return l.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center",key:a}),e.headers.map((function(e,a){return l.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera",style:{fontSize:o?"14px":"15px"},key:a}),e.render("Header"),l.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),l.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),l.a.createElement("tbody",Object.assign({},b(),{className:"text-center",style:{fontSize:o?"13px":"15px"}}),h.map((function(e,a){return E(e)||l.a.createElement("tr",Object.assign({},e.getRowProps(),{key:a+"-"}),e.cells.map((function(e,a){return l.a.createElement("td",Object.assign({},e.getCellProps(),{key:a+"td"}),e.render("Cell"))})))})))),l.a.createElement("div",{className:"pagination"},l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return N(0)},disabled:!v},"<<")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!v},"<")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return C()},disabled:!y},">")," ",l.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return N(k-1)},disabled:!y},">>")," ",l.a.createElement("span",null,"P\xe1gina"," ",l.a.createElement("strong",null,O+1," de ",_.length)," "),l.a.createElement("span",{className:"ml-3"},"| ",l.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),l.a.createElement("input",Object(t.a)({type:"number",defaultValue:O+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;N(a)},className:"inputPage"},"onChange",(function(e){e.target.value>_.length&&(e.target.value=1)}))))," ",l.a.createElement("select",{value:j,onChange:function(e){w(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return l.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,n=e.columns,t=e.displayPaginationUp,r=e.letrasChicas;return l.a.createElement(p,null,l.a.createElement(b,{data:a,columns:n,displayPaginationUp:t,letrasChicas:r}))}},581:function(e,a,n){"use strict";var t=n(27),r=n(0),o=n.n(r),l=n(22),s=(n(285),o.a.forwardRef((function(e,a){var n,r=e.cols?e.cols:"col-md-6 col-sm-6";return"select"!==e.type&&"textarea"!==e.type?o.a.createElement(l.a.Group,{className:r},e.required?o.a.createElement(l.a.Label,{className:"fontBold"},o.a.createElement("span",{className:"asterisk_red"},"*"),e.label):o.a.createElement(l.a.Label,{className:"fontBold"},e.label),o.a.createElement(l.a.Control,(n={ref:a,id:e.name,type:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,readOnly:!!e.readonly&&e.readonly,className:e.className?e.className:"",step:e.step?e.step:"",onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){}},Object(t.a)(n,"className","form-control-sm"),Object(t.a)(n,"disabled",e.disabled),n)),o.a.createElement(l.a.Control.Feedback,{type:"invalid"},"(",e.messageErrors.map((function(e,a){return o.a.createElement("span",{key:a,className:"error-input"},e)})),")")):"select"===e.type?o.a.createElement(l.a.Group,{className:r},e.required?o.a.createElement(l.a.Label,{className:"fontBold"},o.a.createElement("span",{className:"asterisk_red"},"*"),e.label):o.a.createElement(l.a.Label,{className:"fontBold"},e.label),o.a.createElement(l.a.Control,{id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",readOnly:!!e.readonly&&e.readonly,required:e.required,multiple:!!e.multiple&&e.multiple,ref:a||null,className:"form-control-sm",disabled:e.disabled},e.children),o.a.createElement(l.a.Control.Feedback,{type:"invalid"},"(",e.messageErrors.map((function(e,a){return o.a.createElement("span",{key:a,className:"error-input"},e)})),")")):"textarea"===e.type?o.a.createElement(l.a.Group,{className:r},e.required?o.a.createElement(l.a.Label,{className:"fontBold"},o.a.createElement("span",{className:"asterisk_red"},"*"),e.label):o.a.createElement(l.a.Label,{className:"fontBold"},e.label),o.a.createElement(l.a.Control,{id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,rows:e.rows?e.rows:2,readOnly:!!e.readonly&&e.readonly,onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},ref:a||null,className:"form-control-sm",disabled:e.disabled}),o.a.createElement(l.a.Control.Feedback,{type:"invalid"},"(",e.messageErrors.map((function(e,a){return o.a.createElement("span",{key:a,className:"error-input"},e)})),")")):void 0})));a.a=s},597:function(e,a){},603:function(e,a){},604:function(e,a){},747:function(e,a,n){"use strict";n.r(a);var t=n(27),r=n(78),o=n(77),l=n(0),s=n.n(l),c=n(139),i=n(570),u=n(140),m=n(84),p=n(22),d=n(142),g=n(581),b=n(43),f=n.n(b),h=n(76),E=n(580),v=n(28),y=n(44),_=n(590),k=n(602),N=n(286),C=[],x=function(e){var a=Object(l.useState)([]),n=Object(o.a)(a,2),b=n[0],x=n[1],w=Object(l.useState)({nro_propiedad:"",housing_complexe:"",type_ownership:"",block_mzna:"",ownership:""}),P=Object(o.a)(w,2),O=P[0],j=P[1],z=Object(l.useState)([]),M=Object(o.a)(z,2),Y=M[0],H=M[1],S=Object(l.useState)([]),B=Object(o.a)(S,2),D=B[0],q=B[1],T=Object(l.useState)([]),F=Object(o.a)(T,2),L=F[0],R=F[1],U=Object(l.useRef)(null);Object(l.useEffect)((function(){return I(),U.current.focus(),function(){C=[]}}),[]),Object(l.useMemo)((function(){C=[{Header:"Nro Propiedad",accessor:"number",Cell:function(e){return s.a.createElement(c.a,{type:"button",size:"sm",variant:"link",onClick:function(){return A(e.cell.row.original)}},e.cell.row.original.number)}},{Header:"C.Hab",accessor:function(e){return[e.housing_complexe.name]}},{Header:"Tipo Propiedad",accessor:function(e){return[e.typeOwnership.name]}},{Header:"Block/Mzna",accessor:"block"},{Header:"Cant.Dormi",accessor:"number_rooms"},{Header:"Cant.Ba\xf1os",accessor:"number_bathrooms"},{Header:"M2",accessor:"square_mtr"},{Header:"Modelo",accessor:function(e){return[e.models.name]}},{Header:"Esta",accessor:function(e){return e.parkings.length>0?e.parkings.filter((function(e){return 2==e.type})).map((function(e){return e.name})):""}},{Header:"Bodega",accessor:function(e){return e.parkings.length>0?e.parkings.filter((function(e){return 1==e.type})).map((function(e){return e.name})):""}},{Header:"Inscripci\xf3n a Conservador",accessor:function(e){return e.date_inscription_conservative?[N(e.date_inscription_conservative).format("DD-MM-YYYY")]:""}},{Header:"Entrega a Propietario",accessor:function(e){return e.date_delivery_ownership?[N(e.date_delivery_ownership).format("DD-MM-YYYY")]:""}},{Header:"Propietario Rut",accessor:"id_client_ownership"},{Header:"Propietario Nombre",accessor:function(e){return e.ownership_client?[e.ownership_client.name+" "+e.ownership_client.last_names]:""}},{Header:"Arrendador",accessor:function(e){return e.id_client_lessee?[e.lessee.name+" "+e.lessee.last_names]:""}}]}),[]);var I=function(){var e=[f.a.get(h.a+"housing_complexe"),f.a.get(h.a+"master_block"),f.a.get(h.a+"type_ownership"),f.a.get(h.a+"masters_ownership")];Promise.all(e).then((function(e){H(e[0].data),q(e[1].data),R(e[2].data),x(e[3].data)})).catch((function(e){e.response?v.NotificationManager.error(e.response.data.message):(console.log(e),v.NotificationManager.error("Error, contacte con soporte"))}))},K=function(e){j(Object(r.a)(Object(r.a)({},O),{},Object(t.a)({},e.target.name,e.target.value)))},G=function(e,a){var n="";return e.length>0&&e.filter((function(e){return"parking"===a?2==e.type:1==e.type})).forEach((function(e,a){n+=e.name+" \n"})),n},A=function(a){console.log(a,"aqui"),e.history.replace("/masters/ownerships/form/"+a.id)};return s.a.createElement(i.a,{fluid:!0},s.a.createElement(u.a,{className:"containerDiv"},s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement(p.a,{onSubmit:function(e){e.preventDefault();var a=Object.assign({},O);f.a.post(h.a+"masters_ownership_by_filter",a).then((function(e){x(e.data)})).catch((function(e){e.response?v.NotificationManager.error(e.response.data.message):v.NotificationManager.error("Error, contacte con soporte")}))}},s.a.createElement(u.a,null,s.a.createElement(g.a,Object.assign({},e.inputNumber,{value:O.nro_propiedad,handleChange:K,ref:U})),s.a.createElement(d.a,Object.assign({},e.inputHousingComplexe,{value:O.housing_complexe,handleChange:K}),s.a.createElement("option",{value:""},"--Seleccione--"),Y.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)}))),s.a.createElement(d.a,Object.assign({},e.inputTypeOwnership,{value:O.type_ownership,handleChange:K}),s.a.createElement("option",{value:""},"--Seleccione--"),L.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)})))),s.a.createElement(u.a,null,s.a.createElement(d.a,Object.assign({},e.inputBlock,{value:O.block_mzna,handleChange:K}),s.a.createElement("option",{value:""},"--Seleccione--"),D.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)}))),s.a.createElement(d.a,Object.assign({},e.inputOwnership,{value:O.ownership,handleChange:K}))),s.a.createElement(u.a,{className:"justify-content-center"},s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"submit",size:"sm",variant:"secondary",block:!0},"Buscar")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){j({nro_propiedad:"",housing_complexe:"",type_ownership:"",block_mzna:"",ownership:""}),U.current.focus()}},"Limpiar Formulario")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){var e=k.utils.book_new(),a=[["Nro Propiedad","C.Hab","Tipo Propiedad","Block/Mzna","Cant.Dormi","Cant.Ba\xf1os","M2","Modelo","Estacionamiento","Bodega","Inscripci\xf3n Conservador","Entrega a Propietario","Propietario Rut","Propietario Nombre","Arrendador"]];e.Props={Title:"Reporte de Propiedades",Subject:"Exportaci\xf3n de Data",Author:"Veanx tecnology",CreatedDate:N().format("YYYY-MM-DD")},e.SheetNames.push("Propiedades"),b.forEach((function(e,n){a.push([e.number,e.housing_complexe.name,e.typeOwnership.name,e.id_block_mzna?e.block.name:"",e.number_rooms,e.number_bathrooms,e.square_mtr,e.models.name,G(e.parkings,"parking"),G(e.parkings,"cellar"),e.date_inscription_conservative?N(e.date_inscription_conservative).format("DD-MM-YYYY"):"",e.date_delivery_ownership?N(e.date_delivery_ownership).format("DD-MM-YYYY"):"",e.id_client_ownership,e.ownership_client?e.ownership_client.name+" "+e.ownership_client.last_names:"",e.id_client_lessee?e.lessee.name+" "+e.lessee.last_names:""])}));var n=k.utils.aoa_to_sheet(a);e.Sheets.Propiedades=n;var t=k.write(e,{bookType:"xlsx",type:"binary"}),r=Object(y.b)(t);Object(_.saveAs)(new Blob([r],{type:"application/octet-stream"}),"Reporte de Propiedades"+N().format("DD-MM-YYYY")+".xlsx")}},"Exportar a Excel")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){e.history.replace("/masters/ownerships/form")}},"Nueva Propiedad"))))),s.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("h4",{style:{color:"blue"}},"Listado de Propiedades"),s.a.createElement(E.a,{columns:C,data:b}))))};x.defaultProps={inputNumber:{type:"number",required:!1,name:"nro_propiedad",label:"Nro. Propiedad",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputHousingComplexe:{type:"select",required:!1,name:"housing_complexe",label:"Conjunto Habitacional",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputTypeOwnership:{type:"select",required:!1,name:"type_ownership",label:"Tipo de Propiedad",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputBlock:{type:"select",required:!1,name:"block_mzna",label:"Block/Mzna:",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputOwnership:{type:"number",required:!1,name:"ownership",label:"Propietario",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"}},a.default=x}}]);
//# sourceMappingURL=44.6c79bb0f.chunk.js.map