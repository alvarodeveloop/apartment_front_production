(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[58],{571:function(e,a,n){"use strict";var t=n(18),r=n(574),o=n(1),i=n.n(o),s=n(577),c=n(575),l=n(576),u=n(280);function m(){var e=Object(r.a)(["\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return m=function(){return e},e}var p=s.a.div(m());function d(e){var a=e.column,n=a.filterValue,t=a.preFilteredRows,r=a.setFilter,o=t.length;return i.a.createElement("input",{value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(o," registros..."),className:"inputPageFilter"})}function g(e,a,n){return Object(l.a)(e,n,{keys:[function(e){return e.values[a]}]})}function b(e){var a=e.columns,n=e.data,r=e.displayPaginationUp,o=e.letrasChicas,s=i.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,n){return e.filter((function(e){var t=e.values[a];return void 0===t||String(t).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),l=i.a.useMemo((function(){return{Filter:d}}),[]),m=Object(c.useTable)({columns:a,data:n,defaultColumn:l,filterTypes:s,initialState:{pageIndex:0}},c.useFilters,c.useSortBy,c.usePagination),p=m.getTableProps,b=m.getTableBodyProps,f=m.headerGroups,h=m.page,v=m.prepareRow,E=m.canPreviousPage,y=m.canNextPage,_=m.pageOptions,k=m.pageCount,x=m.gotoPage,P=m.nextPage,w=m.previousPage,C=m.setPageSize,N=m.state,O=N.pageIndex,j=N.pageSize;return i.a.createElement("div",{className:"table-responsive"},r?i.a.createElement("div",{className:"pagination"},i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x(0)},disabled:!E},"<<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w()},disabled:!E},"<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!y},">")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x(k-1)},disabled:!y},">>")," ",i.a.createElement("span",null,"P\xe1gina"," ",i.a.createElement("strong",null,O+1," de ",_.length)," "),i.a.createElement("span",{className:"ml-3"},"| ",i.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),i.a.createElement("input",Object(t.a)({type:"number",defaultValue:O+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;x(a)},className:"inputPage"},"onChange",(function(e){e.target.value>_.length&&(e.target.value=1)}))))," ",i.a.createElement("select",{value:j,onChange:function(e){C(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return i.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",i.a.createElement("table",Object.assign({},p(),{className:"table table-bordered"}),i.a.createElement("thead",null,f.map((function(e,a){return i.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center",key:a}),e.headers.map((function(e,a){return i.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera",style:{fontSize:o?"14px":"15px"},key:a}),e.render("Header"),i.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),i.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),i.a.createElement("tbody",Object.assign({},b(),{className:"text-center",style:{fontSize:o?"13px":"15px"}}),h.map((function(e,a){return v(e)||i.a.createElement("tr",Object.assign({},e.getRowProps(),{key:a+"-"}),e.cells.map((function(e,a){return i.a.createElement("td",Object.assign({},e.getCellProps(),{key:a+"td"}),e.render("Cell"))})))})))),i.a.createElement("div",{className:"pagination"},i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x(0)},disabled:!E},"<<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return w()},disabled:!E},"<")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!y},">")," ",i.a.createElement(u.a,{size:"sm",className:"button-pagination",variant:"secondary",onClick:function(){return x(k-1)},disabled:!y},">>")," ",i.a.createElement("span",null,"P\xe1gina"," ",i.a.createElement("strong",null,O+1," de ",_.length)," "),i.a.createElement("span",{className:"ml-3"},"| ",i.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),i.a.createElement("input",Object(t.a)({type:"number",defaultValue:O+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;x(a)},className:"inputPage"},"onChange",(function(e){e.target.value>_.length&&(e.target.value=1)}))))," ",i.a.createElement("select",{value:j,onChange:function(e){C(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return i.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,n=e.columns,t=e.displayPaginationUp,r=e.letrasChicas;return i.a.createElement(p,null,i.a.createElement(b,{data:a,columns:n,displayPaginationUp:t,letrasChicas:r}))}},590:function(e,a){},592:function(e,a){},593:function(e,a){},739:function(e,a,n){"use strict";n.r(a);var t=n(18),r=n(44),o=n(30),i=n(1),s=n.n(i),c=n(280),l=n(567),u=n(568),m=n(282),p=n(10),d=n(112),g=n(288),b=n(25),f=n.n(b),h=n(34),v=n(571),E=n(13),y=n(50),_=n(582),k=n(591),x=n(289),P=[],w=function(e){var a=Object(i.useState)([]),n=Object(o.a)(a,2),b=n[0],w=n[1],C=Object(i.useState)({nro_propiedad:"",housing_complexe:"",type_ownership:"",block_mzna:"",ownership:""}),N=Object(o.a)(C,2),O=N[0],j=N[1],z=Object(i.useState)([]),M=Object(o.a)(z,2),Y=M[0],H=M[1],S=Object(i.useState)([]),D=Object(o.a)(S,2),B=D[0],T=D[1],F=Object(i.useState)([]),R=Object(o.a)(F,2),q=R[0],I=R[1],A=Object(i.useRef)(null);Object(i.useEffect)((function(){return L(),A.current.focus(),function(){P=[]}}),[]),Object(i.useMemo)((function(){P=[{Header:"Nro Propiedad",accessor:"number",Cell:function(e){return s.a.createElement(c.a,{type:"button",size:"sm",variant:"link",onClick:function(){return G(e.cell.row.original)}},e.cell.row.original.number)}},{Header:"C.Hab",accessor:function(e){return[e.housing_complexe.name]}},{Header:"Tipo Propiedad",accessor:function(e){return[e.typeOwnership.name]}},{Header:"Block/Mzna",accessor:"block"},{Header:"Cant.Dormi",accessor:"number_rooms"},{Header:"Cant.Ba\xf1os",accessor:"number_bathrooms"},{Header:"M2",accessor:"square_mtr"},{Header:"Modelo",accessor:function(e){return[e.models.name]}},{Header:"Esta",accessor:function(e){return e.parkings.length>0?e.parkings.filter((function(e){return 2==e.type})).map((function(e){return e.name})):""}},{Header:"Bodega",accessor:function(e){return e.parkings.length>0?e.parkings.filter((function(e){return 1==e.type})).map((function(e){return e.name})):""}},{Header:"Inscripci\xf3n a Conservador",accessor:function(e){return e.date_inscription_conservative?[x(e.date_inscription_conservative).format("DD-MM-YYYY")]:""}},{Header:"Entrega a Propietario",accessor:function(e){return e.date_delivery_ownership?[x(e.date_delivery_ownership).format("DD-MM-YYYY")]:""}},{Header:"Propietario Rut",accessor:"id_client_ownership"},{Header:"Propietario Nombre",accessor:function(e){return e.ownership_client?[e.ownership_client.name+" "+e.ownership_client.last_names]:""}},{Header:"Arrendador",accessor:function(e){return e.id_client_lessee?[e.lessee.name+" "+e.lessee.last_names]:""}}]}),[]);var L=function(){var e=[f.a.get(h.a+"housing_complexe"),f.a.get(h.a+"master_block"),f.a.get(h.a+"type_ownership"),f.a.get(h.a+"masters_ownership")];Promise.all(e).then((function(e){H(e[0].data),T(e[1].data),I(e[2].data),w(e[3].data)})).catch((function(e){e.response?E.b.error(e.response.data.message):(console.log(e),E.b.error("Error, contacte con soporte"))}))},V=function(e){j(Object(r.a)(Object(r.a)({},O),{},Object(t.a)({},e.target.name,e.target.value)))},U=function(e,a){var n="";return e.length>0&&e.filter((function(e){return"parking"===a?2==e.type:1==e.type})).forEach((function(e,a){n+=e.name+" \n"})),n},G=function(a){console.log(a,"aqui"),e.history.replace("/masters/ownerships/form/"+a.id)};return s.a.createElement(l.a,{fluid:!0},s.a.createElement(u.a,{className:"containerDiv"},s.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12,className:""},s.a.createElement("h4",{className:"title_principal"},"Propiedades"),s.a.createElement("hr",null)),s.a.createElement(m.a,{sm:12,md:12,lg:12},s.a.createElement(p.a,{onSubmit:function(e){e.preventDefault();var a=Object.assign({},O);f.a.post(h.a+"masters_ownership_by_filter",a).then((function(e){w(e.data)})).catch((function(e){e.response?E.b.error(e.response.data.message):E.b.error("Error, contacte con soporte")}))}},s.a.createElement(u.a,null,s.a.createElement(g.a,Object.assign({},e.inputNumber,{value:O.nro_propiedad,handleChange:V,ref:A})),s.a.createElement(d.a,Object.assign({},e.inputHousingComplexe,{value:O.housing_complexe,handleChange:V}),s.a.createElement("option",{value:""},"--Seleccione--"),Y.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)}))),s.a.createElement(d.a,Object.assign({},e.inputTypeOwnership,{value:O.type_ownership,handleChange:V}),s.a.createElement("option",{value:""},"--Seleccione--"),q.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)})))),s.a.createElement(u.a,null,s.a.createElement(d.a,Object.assign({},e.inputBlock,{value:O.block_mzna,handleChange:V}),s.a.createElement("option",{value:""},"--Seleccione--"),B.map((function(e,a){return s.a.createElement("option",{value:e.id},e.name)}))),s.a.createElement(d.a,Object.assign({},e.inputOwnership,{value:O.ownership,handleChange:V}))),s.a.createElement(u.a,{className:"justify-content-center"},s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"submit",size:"sm",variant:"secondary",block:!0},"Buscar")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){j({nro_propiedad:"",housing_complexe:"",type_ownership:"",block_mzna:"",ownership:""}),A.current.focus()}},"Limpiar Formulario")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){var e=k.utils.book_new(),a=[["Nro Propiedad","C.Hab","Tipo Propiedad","Block/Mzna","Cant.Dormi","Cant.Ba\xf1os","M2","Modelo","Estacionamiento","Bodega","Inscripci\xf3n Conservador","Entrega a Propietario","Propietario Rut","Propietario Nombre","Arrendador"]];e.Props={Title:"Reporte de Propiedades",Subject:"Exportaci\xf3n de Data",Author:"Veanx tecnology",CreatedDate:x().format("YYYY-MM-DD")},e.SheetNames.push("Propiedades"),b.forEach((function(e,n){a.push([e.number,e.housing_complexe.name,e.typeOwnership.name,e.id_block_mzna?e.block.name:"",e.number_rooms,e.number_bathrooms,e.square_mtr,e.models.name,U(e.parkings,"parking"),U(e.parkings,"cellar"),e.date_inscription_conservative?x(e.date_inscription_conservative).format("DD-MM-YYYY"):"",e.date_delivery_ownership?x(e.date_delivery_ownership).format("DD-MM-YYYY"):"",e.id_client_ownership,e.ownership_client?e.ownership_client.name+" "+e.ownership_client.last_names:"",e.id_client_lessee?e.lessee.name+" "+e.lessee.last_names:""])}));var n=k.utils.aoa_to_sheet(a);e.Sheets.Propiedades=n;var t=k.write(e,{bookType:"xlsx",type:"binary"}),r=Object(y.b)(t);Object(_.saveAs)(new Blob([r],{type:"application/octet-stream"}),"Reporte de Propiedades"+x().format("DD-MM-YYYY")+".xlsx")}},"Exportar a Excel")),s.a.createElement(m.a,{sm:3,md:3,lg:3},s.a.createElement(c.a,{type:"button",size:"sm",variant:"secondary",block:!0,onClick:function(){e.history.replace("/masters/ownerships/form")}},"Nueva Propiedad"))))),s.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("h4",{style:{color:"blue"}},"Listado de Propiedades"),s.a.createElement(v.a,{columns:P,data:b}))))};w.defaultProps={inputNumber:{type:"number",required:!1,name:"nro_propiedad",label:"Nro. Propiedad",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputHousingComplexe:{type:"select",required:!1,name:"housing_complexe",label:"Conjunto Habitacional",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputTypeOwnership:{type:"select",required:!1,name:"type_ownership",label:"Tipo de Propiedad",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputBlock:{type:"select",required:!1,name:"block_mzna",label:"Block/Mzna:",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputOwnership:{type:"number",required:!1,name:"ownership",label:"Propietario",messageErrors:[],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"}},a.default=w}}]);
//# sourceMappingURL=58.df347307.chunk.js.map